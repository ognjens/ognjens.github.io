function errorAlert(e,t){swal(e,t,"error")}function successAlert(e,t){swal(e,t,"success")}var FR={ERROR:"Ce champs est nécessaire",POWERED_BY:"ALIMENTÉ PAR:",UNSUPPORTED_HEADER:"Vous semblez utiliser un navigateur incompatible avec notre système",UNSUPPORTED_TEXT:"Veuillez utiliser un des navigateurs suivants pour profiter des services de réservation de Tap medical.",CHOOSE:"Choisissez votre rendez-vous",CHOOSE_SPECIALTY:"Veuillez s'il vous plaît choisir une spécialité pour réserver un rendez-vous au",CHOOSE_A_DOCTOR:"Choisissez un médecin",SPECIALTY_TEXT:"Veuillez s'il vous plaît sélectionner une spécialité afin de voir vos rendez-vous disponibles. Vous pouvez également effectuer votre recherche en sélectionnant un médecin spécifique.",SELECT_APPT_BUTTON:"CHOISIR UN RENDEZ-VOUS & CONTINUER",SELECT_DATE:"Sélectionnez une date spécifique",SELECT_TIME:"Heure préférée",SELECT_SPECIALTY:"Veuillez choisir une spécialité",LOADING_AVAILABILITIES:"Chargement des disponibilités ...",NO_AVAILABLE_APPTS:"Il n'y a pas de rendez-vous disponibles pour la Spécialité, la date et / ou le médecin que vous avez sélectionné",LOGIN_HEADER:"Accéder votre compte",LOGIN_BUTTON:"Ouvrir une session",LOGIN_TEXT:"Veuillez vous connecter à votre compte médical Tap pour envoyer et recevoir rapidement des informations importantes sur votre rendez-vous.",PASSWORD:"Mot de passe",ENTER_PASSWORD:"Entrer le mot de passe",FORGOT_YOUR_PASSWORD:"Mot de passe oublié?",NO_ACCOUNT:"Vous n'avez pas de compte? CRÉER UN COMPTE",ENTER_EMAIL:"Entrer l'adresse courriel",EMAIL:"Courriel",LOGOUT:"SE DÉCONNECTER",ANYTIME:"A tout moment",MORNING:"Matin",AFTERNOON:"Après midi",EVENING:"Soirée",SEND:"ENVOYER",YY:"AA",ENGLISH:"English",FRENCH:"Français",SPECIALTY:"Spécialité",NO_RAMQ_PERSON:"Cette personne n'a pas de numéro de RAMQ",NOTIFICATIONS:"Envoyer cette personne des notifications de rendez-vous et des rappels",RELATIONSHIP_TYPE:"Sélectionnez un type de relation",PARENT:"Parent",CHILD:"Enfant",SIBLING:"Enfant de mêmes parents",SPOUSE:"Époux",OTHER:"Autre",I_NO_RAMQ:"Je n'ai pas de numéro RAMQ",JAN_SHORT:"Jan",FEB_SHORT:"Fév",MAR_SHORT:"Mar",APR_SHORT:"Avr",MAY_SHORT:"Mai",JUN_SHORT:"Jun",JUL_SHORT:"Jul",AUG_SHORT:"Aoû",SEP_SHORT:"Sep",OCT_SHORT:"Oct",NOV_SHORT:"Nov",DEC_SHORT:"Déc",SIX_CHAR_LONG:"Ce mot de passe doit comporter au moins 6 caractères.",FORGOT_PASSWORD:"Mot de passe oublié",FORGOT_TEXT:"Entrez votre adresse courriel pour recevoir les instructions nécessaires pour changer votre mot de passe. ",RESET_SENT_MESSAGE:"Le lien pour réinitialiser le mot de passe a été envoyé",SIGNUP_HEADER:"Nouvelles informations pour le compte",SIGNUP_TEXT:"Veuillez vous assurer que les informations ci-dessous sont correctes et à jour. Toute information non valide peut engendrer la perte de rendez-vous.",FIRST_NAME:"Prénom",ENTER_FIRST_NAME:"Entrez votre prénom",LAST_NAME:"Nom de famille (jeune fille)",ENTER_LAST_NAME:"Entrer votre nom de famille",NATURE_OF_RELATIONSHIP:"Nature de la relation",RAMQ_NUMBER:"Numéro de RAMQ",ENTER_RAMQ_NUMBER:"Entrez le numéro de RAMQ",NO_RAMQ:"Je n'ai pas de numéro RAMQ",RAMQ_EXPIRY:"Date d'expiration de la RAMQ",DOB:"Date de naissance",GENDER:"Sexe",MOBILE_INFO_TEXT:"*Vos informations cellulaires sont nécessaires afin de confirmer votre rendez-vous, de recevoir des rappels ou des avis importants relatifs aux changements apportés à votre rendez-vous.",PREFERRED_LANGUAGE:"Langue préférée",MOBILE_PHONE:"Téléphone cellulaire (requis)",ENTER_MOBILE_PHONE:"Numéro de téléphone",CONFIRM_PASSWORD:"Confirmez le mot de passe",AGREE_TERMS:"J'accepte les ",AGREE_TERMS_REST:"conditions suivantes",SAVE_AND_CONTINUE:"SAUVEGARDER ET CONTINUER",GENDER_FEMALE:"Femelle",GENDER_MALE:"Mâle",PIN_CONFIRMATION:"Confirmation du code NIP",REVIEW_INFORMATION:"Cette étape confirmera votre numéro de téléphone cellulaire.",SMS_SENT:"Un message SMS a été envoyé au numéro de téléphone cellulaire figurant sur votre compte:",SMS_SENT_REST:"Veuillez s'il vous plaît entrer le code NIP à 4 chiffres que vous avez reçu afin de vérifier votre numéro de téléphone cellulaire.",PIN_PLACEHOLDER:"NIP à 4 chiffres",VERIFY:"Vérifier",ADD_NEW_PROFILE:"Ajouter un nouveau profil",WELCOME_BACK:"Bienvenue,",SELECT_A_PATIENT:"Veuillez choisir un patient et décrire les raisons pour prendre le rendez-vous",WHO_FOR:"À qui s'adresse ce rendez-vous?",DESCRIBE_REASON:"Décrivez les raisons qui vous motivent à prendre ce rendez-vous",SELECT_A_PATIENT_BUTTON:"CHOISISSEZ UN PATIENT POUR CONTINUER",BOOK_FOR:"RÉSERVER POUR",CONFIRM_APPT_INFO:"Confirmer les informations pour le rendez-vous",REVIEW:"Veuillez revoir les informations ci-dessous et cliquer sur «confirmer» votre rendez-vous",PATIENT:"Patient",PHYSICIAN:"Médecin",LOCATION:"Lieu de travail",TIME:"Heure",CONFIRM_APPT:"CONFIRMER LE RENDEZ-VOUS",CONFIRMED_NAME:"Rendez-vous pour ",CONFIRMED_NAME_REST:"confirmé!",CONFIRMED_TEXT:"Votre rendez-vous a été confirmé! Un courriel avec vos informations de rendez-vous a été envoyé á:",CONFIRMED_REMINDERS:"Rappels - Pour chaque rendez-vous, vous recevrez deux rappels par courriel soient à 2 semaines, à 2 jours avant votre rendez-vous ainsi que le jour même de votre rendez-vous.",ADD_TO_CALENDAR:"AJOUTER AU CALENDRIER",DOWNLOAD_APP_TEXT:"Vous souhaitez prendre rendez-vous et obtenir des mises à jour de rendez-vous directement sur votre téléphone cellulaire? ",DOWNLOAD_APP_HEADER:"Téléchargez l'application Tap Medical:",BOOK_ANOTHER:"RÉSERVER UN AUTRE RENDEZ-VOUS",BOOK:"RÉSERVER RENDEZ-VOUS",REASON_CONSULTATION:"Quelle est la raison pour la consultation?",TYPE_CHOOSE:"S'il vous plaît laissez-nous savoir pour quelle raison vous êtes là en choisissant l’une des options suivantes.",URGENT_CARE:"Rendez-vous d'urgence",URGENT_EXP:"Choisissez cette option si vous avez besoin de consulter un médecin aujourd'hui ou demain",FAMILY_DOCTOR:"Visite pour médecin de famille",FAMILY_DOCTOR_EXP:"Choisissez cette option si vous souhaitez un rendez-vous avec votre médecin traitant",SPECIALIST:"Rendez-vous avec un médecin spécialiste",SPECIALIST_EXP:"Choisissez cette option si vous avez besoin d'un rendez-vous avec un médecin spécialiste",IS_FOLLOWUP:"Est-ce un rendez-vous de suivi à cette clinique? Si oui, laissez cette case cochée afin d'informer la clinique et le médecin."},EN={ERROR:"This field cannot be empty",POWERED_BY:"POWERED BY:",UNSUPPORTED_HEADER:"You seem to be using an unsupported browser",UNSUPPORTED_TEXT:"To get the most out of Tap medical’s booking services please use one of the following supported browsers.",CHOOSE:"Choose your appointment",CHOOSE_SPECIALTY:"Please choose a specialty to book an appointment at",CHOOSE_A_DOCTOR:"Choose a doctor",SPECIALTY_TEXT:"Please select a specialty in order to see your available appointments. You may also refine your search by selecting a specific doctor.",SELECT_APPT_BUTTON:"SELECT APPOINTMENT & CONTINUE",SELECT_DATE:"Select a specific date",SELECT_TIME:"Select a specific time",SELECT_SPECIALTY:"Select a specialty",LOADING_AVAILABILITIES:"Loading availabilities...",NO_AVAILABLE_APPTS:"There are no available appointments for the Specialty, date and/or doctor you have selected",LOGIN_HEADER:"Login to your account",LOGIN_BUTTON:"Login",LOGIN_TEXT:"Please login to your Tap medical account to quickly send and receive important information about your appointment.",PASSWORD:"Password",ENTER_PASSWORD:"Enter password",FORGOT_YOUR_PASSWORD:"Forgot your password?",NO_ACCOUNT:"Don’t have an account? CREATE AN ACCOUNT",ENTER_EMAIL:"Enter email address",EMAIL:"Email",LOGOUT:"LOG OUT",ANYTIME:"Anytime",MORNING:"Morning",AFTERNOON:"Afternoon",EVENING:"Evening",SEND:"SEND",YY:"YY",ENGLISH:"English",FRENCH:"Français",SPECIALTY:"Specialty",NO_RAMQ_PERSON:"This person doesn't have a RAMQ number",NOTIFICATIONS:"Send this person appointment notifications and reminders",RELATIONSHIP_TYPE:"Select a relationship type",PARENT:"Parent",CHILD:"Child",SIBLING:"Sibling",SPOUSE:"Spouse",OTHER:"Other",I_NO_RAMQ:"I don't have a RAMQ number",JAN_SHORT:"Jan",FEB_SHORT:"Feb",MAR_SHORT:"Mar",APR_SHORT:"Apr",MAY_SHORT:"May",JUN_SHORT:"Jun",JUL_SHORT:"Jul",AUG_SHORT:"Aug",SEP_SHORT:"Sep",OCT_SHORT:"Oct",NOV_SHORT:"Nov",DEC_SHORT:"Dec",SIX_CHAR_LONG:"This password needs to be at least 6 characters long.",FORGOT_PASSWORD:"Forgot Password",FORGOT_TEXT:"Enter your email address to receive instructions on how to change your password",RESET_SENT_MESSAGE:"Reset Password link sent",SIGNUP_HEADER:"New account information",SIGNUP_TEXT:"Please ensure that the below information is correct and up to date. Any invalid information may result in loss of a scheduled appointment.",FIRST_NAME:"First name",ENTER_FIRST_NAME:"Enter first name",LAST_NAME:"Last name (maiden)",ENTER_LAST_NAME:"Enter last name",NATURE_OF_RELATIONSHIP:"Nature of relationship",RAMQ_NUMBER:"RAMQ number",ENTER_RAMQ_NUMBER:"Enter RAMQ number",NO_RAMQ:"I do not have a RAMQ number",RAMQ_EXPIRY:"RAMQ expiry date",DOB:"Date of birth",GENDER:"Gender",MOBILE_INFO_TEXT:"*Your mobile information is required in order to confirm your appointment and receive important reminders and notifications regarding changes to your appointment.",PREFERRED_LANGUAGE:"Preferred language of communication",MOBILE_PHONE:"Mobile phone (required)",ENTER_MOBILE_PHONE:"Enter mobile phone",CONFIRM_PASSWORD:"Confirm password",AGREE_TERMS:"I agree to the following ",AGREE_TERMS_REST:"terms & conditions",SAVE_AND_CONTINUE:"SAVE AND CONTINUE",GENDER_FEMALE:"Female",GENDER_MALE:"Male",PIN_CONFIRMATION:"PIN confirmation",REVIEW_INFORMATION:"This step will verify you mobile number.",SMS_SENT:"An SMS message has been sent to the mobile number listed in your account:",SMS_SENT_REST:"Please enter the 4 digit PIN you received by text in order to verify your mobile number.",PIN_PLACEHOLDER:"4# PIN",VERIFY:"Verify",ADD_NEW_PROFILE:"Add a new profile",WELCOME_BACK:"Welcome back,",SELECT_A_PATIENT:"Please select a patient and describe your reasons for making this appointment",WHO_FOR:"Who is this appointment for?",DESCRIBE_REASON:"Describe your reasons for making this appointment",SELECT_A_PATIENT_BUTTON:"SELECT A PATIENT TO CONTINUE",BOOK_FOR:"BOOK FOR",CONFIRM_APPT_INFO:"Confirm appointment information",REVIEW:'Please review the information below and click "confirm" to schedule your appointment',PATIENT:"Patient",PHYSICIAN:"Physician",LOCATION:"Location",TIME:"Time",CONFIRM_APPT:"CONFIRM APPOINTMENT",CONFIRMED_NAME:"Appointment for ",CONFIRMED_NAME_REST:"confirmed!",CONFIRMED_TEXT:"Your appointment has been confirmed! An email with your appointment information has been sent to:",CONFIRMED_REMINDERS:"Reminders - For each appointment, two email reminders will be sent to you at 2 Weeks and at 2 days prior to you appointment as well as the day of your appointment.",ADD_TO_CALENDAR:"ADD TO CALENDAR",DOWNLOAD_APP_TEXT:"Want to make appointments and get appointment updates directly on your mobile phone?",DOWNLOAD_APP_HEADER:"Download the Tap Medical app:",BOOK_ANOTHER:"BOOK ANOTHER APPOINTMENT",BOOK:"BOOK APPOINTMENT",REASON_CONSULTATION:"What is the reason for consultation?",TYPE_CHOOSE:"Please let us know why you are here by selecting one of the following options",URGENT_CARE:"Urgent care appointment",URGENT_EXP:"Choose this option if you need to see a doctor today or tomorrow",FAMILY_DOCTOR:"Family doctor visit",FAMILY_DOCTOR_EXP:"Choose this option if you would like an appointment with your regular doctor",SPECIALIST:"Medical specialist appointment",SPECIALIST_EXP:"Choose this option if you need an appointment with a medical specialist",IS_FOLLOWUP:"Is this a follow-up appointment to a previous visit at this clinic? If so please leave this box checked in order to inform the clinic and the doctor."};!function(){"use strict";angular.module("dashboard",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngResource","ngMessages","nya.bootstrap.select","ui.router","pascalprecht.translate","ngMask","ngMaterial","LocalStorageModule"])}(),angular.module("dashboard").factory("AvailabilitiesFactory",["$log","$http","$q","AuthService","apiUrl","localStorageService",function(e,t,o,n,a,i){function r(e){_=e}function l(){return _}function s(e){E[e]=!0}function p(e){return E[e]?(E[e]=!1,!0):!1}function c(){return f}function d(e){f=e}function u(){return R}function m(e){R=e}function v(o){return e.info("AvailabilitiesFactory::search"),t({method:"POST",url:a+"/availabilities/"+i.get("apptType"),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n.getToken()},data:o}).then(function(e){return f=e.data.data}).catch(h)}function h(e){return o.reject(angular.isObject(e.data)&&e.data.message?e.data.message:"An unknown error occurred.")}var g={get:c,set:d,clearForm:s,shouldClearForm:p,setLastForm:r,getLastForm:l,getLastSelectedItem:u,setLastSelectedItem:m,search:v},f=[],E={familyDoctorVisit:!1,consultSpecialist:!1,sameDayCare:!1},_="",R={};return g}]),angular.module("dashboard").controller("WelcomeCtrl",["$log","$scope","$state","$timeout","$rootScope","MyProfileService","localStorageService",function(e,t,o,n,a,i,r){return i.get().then(function(e){t.userInfo=e,"undefined"==typeof e.id&&o.go("login"),t.formData={id:t.userInfo.id.toString(),first_name:t.userInfo.first_name,last_name:t.userInfo.last_name,text:""},t.selectedUser=t.formData,r.set("selectedUserId",t.userInfo.id)}).catch(function(e){errorAlert(e)}),i.getRelations().then(function(e){t.relatives=e,r.set("userRelations",t.relatives)}).catch(function(e){errorAlert(e)}),t.selectOther=function(e){r.set("selectedUserId",e);var o=r.get("appointmentIds"),n={account_id:parseInt(e),doctor_availability_ids:o.doctor_availability_ids},a=(r.get("userRelations"),r.get("currentUser"));e!=a.id?i.showRelation(e).then(function(e){t.selectedUser=e}).catch(function(e){console.log(e)}):t.selectedUser=t.formData,r.set("appointmentIds",n)},t.selectUser=function(){null!=r.get("appointmentIds")?(r.set("reasonText",t.formData.text),o.go("confirm-appointment")):o.go("choose-appointment")},t}]),angular.module("dashboard").factory("SpecialtiesFactory",["$log","$http","$q","apiUrl","AuthService","localStorageService",function(e,t,o,n,a,i){function r(){e.info("ClinicsFactory::list");var o=i.get("language");return t({method:"GET",url:n+"/specialties?lang="+o,headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.getToken()}}).then(function(e){return e.data.data}).catch(l)}function l(e){return o.reject(angular.isObject(e.data)&&e.data.message?e.data.message:"An unknown error occurred.")}var s={list:r};return s}]),angular.module("dashboard").factory("MyProfileService",["$log","$http","$q","AuthService","apiUrl",function(e,t,o,n,a){function i(){return e.info("MyProfileLocationsService::get"),n.getCurrentUser()?t({method:"GET",url:a+"/profile",headers:{"Content-Type":"application/json",Authorization:"bearer "+n.getToken()}}).then(function(e){return console.log("user profile ",e.data.data),e.data.data}).catch(g):(e.info("MyProfileLocationsService::get","User is not logged in !?"),o.resolve([]))}function r(){return e.info("MyProfileLocationsService::show"),n.getCurrentUser()?t({method:"GET",url:a+"/profile",headers:{"Content-Type":"application/json",Authorization:"bearer "+n.getToken()}}).then(function(e){return console.log(e),e.data}).catch(g):(e.info("MyProfileLocationsService::show","User is not logged in !?"),o.resolve([]))}function l(i){return e.info("MyProfileLocationsService::update",i),1==E&&(i.skip_ramq_validation=!0),n.getCurrentUser()?t({method:"PUT",url:a+"/profile",headers:{"Content-Type":"application/json",Authorization:"bearer "+n.getToken()},data:i}).then(function(e){return E=!1,e.data}).catch(function(e){if(420==e.status&&0==E){E=!0;var t=e.data.errors,o="";angular.forEach(t,function(e){o+=e+"\n"}),errorAlert(o)}else{var t=e.data.errors,o="";angular.forEach(t,function(e){o+=e+"\n"}),errorAlert(o)}}):(e.info("MyProfileService::update","User is not logged in !?"),o.resolve([]))}function s(){return e.info("MyProfileService::getRelations"),n.getCurrentUser()?t({method:"GET",url:a+"/relations",headers:{"Content-Type":"application/json",Authorization:"bearer "+n.getToken()}}).then(function(e){return e.data.data}).catch(g):(e.info("MyProfileService::getRelations","User is not logged in !?"),o.resolve([]))}function p(i){return e.info("MyProfileService::addRelation",i),1==_&&(i.skip_ramq_validation=!0),n.getCurrentUser()?t({method:"POST",url:a+"/relations",headers:{"Content-Type":"application/json",Authorization:"bearer "+n.getToken()},data:i}).then(function(e){return _=!1,e.data.data}).catch(function(e){if(420==e.status&&0==_){_=!0;var t=e.data.errors,o="";angular.forEach(t,function(e){o+=e+"\n"}),errorAlert(o)}else{var t=e.data.errors,o="";angular.forEach(t,function(e){o+=e+"\n"}),errorAlert(o)}}):(e.info("MyProfileService::getRelations","User is not logged in !?"),o.resolve([]))}function c(i){return e.info("MyProfileService::updateRelation",i),1==R&&(i.skip_ramq_validation=!0),n.getCurrentUser()?t({method:"PUT",url:[a,"relations",i.id].join("/"),headers:{"Content-Type":"application/json",Authorization:"bearer "+n.getToken()},data:i}).then(function(e){return R=!1,e.data.data}).catch(function(e){return 420==e.status&&0==R?(R=!0,o.reject(e.data.message)):o.reject(e.data.message)}):(e.info("MyProfileService::getRelations","User is not logged in !?"),o.resolve([]))}function d(i){return e.info("MyProfileService::updateRelation",i),n.getCurrentUser()?t({method:"GET",url:[a,"relations",i].join("/"),headers:{"Content-Type":"application/json",Authorization:"bearer "+n.getToken()}}).then(function(e){return e.data.data}).catch(g):(e.info("MyProfileService::getRelations","User is not logged in !?"),o.resolve([]))}function u(i){return e.info("MyProfileService::deleteLocation",i),n.getCurrentUser()?t({method:"DELETE",url:[a,"relations",i.id].join("/"),headers:{"Content-Type":"application/json",Authorization:"bearer "+n.getToken()}}).then(function(e){return e.data.data}).catch(g):(e.info("deleteLocation::getRelations","User is not logged in !?"),o.resolve([]))}function m(o){return e.info("MyProfileService::resetPassword called"),t({method:"POST",url:a+"/auth/reset-password",headers:{"Content-Type":"application/json"},data:o}).then(function(e){return e}).catch(function(e){var t=e.data.errors,o="";return angular.forEach(t,function(e){o+=e+"\n"}),e})}function v(o){return e.info("MyProfileService::check pin called"),t({method:"POST",url:a+"/verify-phone",headers:{"Content-Type":"application/json",Authorization:"bearer "+n.getToken()},data:o}).then(function(e){return e.data.data}).catch(g)}function h(){return e.info("MyProfileService:: accepted the terms"),t({method:"GET",url:a+"/accept-terms-of-service",headers:{"Content-Type":"application/json",Authorization:"bearer "+n.getToken()}}).then(function(e){return e.data.data}).catch(function(e){errorAlert(e)})}function g(){}var f={get:i,update:l,getRelations:s,showRelation:d,addRelation:p,updateRelation:c,deleteLocation:u,resetPassword:m,checkPin:v,terms:h,show:r},E=!1,_=!1,R=!1;return f}]),angular.module("dashboard").controller("UpdateUserInfoCtrl",["$log","$scope","$state","SignupService","LoginService","AuthService","MyProfileService",function(e,t,o,n,a,i,r){e.info("NewUserCtrl initialized"),document.getElementById("mobile_input").click(),t.formData={email:"",mobile:"",password:"",confirm_password:""},t.showButton=!0;var l=(new Date).getFullYear();t.availableYears=[];for(var s=l;s>=1920;s--)t.availableYears.push(s);return t.birthMonth="",t.birthDay="",t.birthYear="",t.options={email:"",mobile_phone:"",password:"",confirm_password:"",first_name:"",last_name:"",RAMQ:"",RAMQ_expiry_date:"",gender:"",preferred_language:"",date_of_birth:"",source:""},r.show().then(function(o){if(e.info("showprofile",o),t.AccountInfo=o.data,t.AccountInfo.mobile_phone=t.AccountInfo.mobile_phone.replace("+1",""),t.AccountInfo.ramq_expiry_selected_month,t.AccountInfo.ramq_expiry_selected_year,t.AccountInfo.RAMQ_expiry_date){var n=t.AccountInfo.RAMQ_expiry_date.split("-");console.log("aDate",n),t.AccountInfo.ramq_expiry_selected_month=n[1],t.AccountInfo.ramq_expiry_selected_year=n[0]}e.info("phone",t.AccountInfo.mobile_phone);var a=t.AccountInfo.date_of_birth;t.AccountInfo.date_of_birth=a,t.birthYear=parseInt(a.split("-")[0]),t.birthDay=a.slice(8,10),t.birthMonth=a.split("-")[1].split("-")[0],console.log(t.birthMonth,t.birthYear,t.birthDay),t.AccountInfo.gender=t.AccountInfo.gender.toString(),t.AccountInfo.preferred_language="en",t.options=t.AccountInfo,t.options=t.AccountInfo,document.getElementById("mobile_input").click()}),t.updateProfile=function(){if(t.noRAMQ?(delete t.options.RAMQ,delete t.options.RAMQ_expiry_date):t.options.RAMQ_expiry_date=t.options.ramq_expiry_selected_year+"-"+("0"+t.options.ramq_expiry_selected_month).slice(-2)+"-01",t.options.mobile_phone){var e="+1"+t.options.mobile_phone;e=e.replace(/[^a-zA-Z0-9\+]/g,""),t.options.mobile_phone=e}t.options.date_of_birth=[t.birthYear,t.birthMonth,t.birthDay].join("-");var n={email:t.options.email,mobile_phone:t.options.mobile_phone,first_name:t.options.first_name,last_name:t.options.last_name,RAMQ:t.options.RAMQ,RAMQ_expiry_date:t.options.RAMQ_expiry_date,gender:t.options.gender,preferred_language:t.options.preferred_language,date_of_birth:t.options.date_of_birth,noRAMQ:t.options.noRAMQ,source:"web"};r.update(n).then(function(){o.go("welcome")}).catch(function(e){errorAlert(e),document.getElementById("mobile_input").click()})},t}]),angular.module("dashboard").factory("SignupService",["$log","$http","$q","apiUrl","$httpParamSerializerJQLike",function(e,t,o,n,a){function i(e){return e?t({method:"POST",url:n+"/accounts",headers:{"content-type":"application/x-www-form-urlencoded","cache-control":"no-cache"},data:a(e)}):void o.reject("Argument is missing")}function r(e){s=e}function l(){return s}var s={};return{signUp:i,saveSignUpData:r,getSignUpData:l}}]),angular.module("dashboard").controller("NewUserCtrl",["$log","$scope","$state","SignupService","LoginService","AuthService","MyProfileService","localStorageService",function(e,t,o,n,a,i,r,l){e.info("NewUserCtrl initialized"),t.formData={email:"",mobile:"",password:"",confirm_password:""};var s=new Date,p=(new Date).getFullYear();t.availableYears=[];for(var c=p;c>=1920;c--)t.availableYears.push(c);t.birthMonth="",t.birthDay="",t.birthYear="",t.showButton=!0;var d={name:"Please enter first and last name",dob:"Please enter date of birth",gender:"Please select a gender",relationship:"Please select a relationship type",ramq:"Please enter a RAMQ number",phone:"You must enter a contact phone",digits:"You phone must be 10 digits long",phone_start:"Phone number can't start with number 1",emal:"You must enter a contact email",password_match:"Passwords don't match",terms:"You have to accept the terms & conditions to proceed",past:"Date of birth must be in the past"};if("FR"==l.get("language"))var d={name:"S'il vous plaît entrer votre prénom et votre nom de famille",dob:"S'il vous plaît entrer votre date de naissance",gender:"S'il vous plaît choisissez le sexe",relationship:"S'il vous plaît indiquer votre relation avec cette personne",ramq:"S'il vous plaît entrer votre numéro de RAMQ",phone:"Vous devez entrer un numéro de téléphone valide",digits:"Votre numéro de téléphone doit contenir 10 chiffres",phone_start:"Votre numéro de téléphone ne peut pas commencer par le chiffre 1",emal:"Vous devez entrer une adresse courriel valide",password_match:"Les mots de passe ne correspondent pas",terms:"Vous devez accepter les termes et conditions pour procéder",past:"La date de naissance doit être dans le passé"};return t.skipvalidation=!1,t.signUp=function(){if(t.showButton=!1,t.submitted=!0,"1"==t.mobile.slice(1,2))errorAlert(d.digits);else if(t.password!=t.confirm_password)errorAlert(d.password_match);else if(t.terms)if(t.gender)if(t.birthMonth&&t.birthDay&&t.birthYear)if(t.birthYear==p&&s.getMonth()+1<=t.birthMonth&&s.getDate()<=t.birthDay)errorAlert(d.past);else{if(t.formData.mobile=t.formData.mobile.replace("+1",""),t.mobile){var r="+1"+t.mobile;r=r.replace(/[^a-zA-Z0-9\+]/g,""),t.mobile=r}var l={email:t.email,mobile_phone:t.mobile,password:t.password,confirm_password:t.confirm_password,first_name:t.first_name,last_name:t.last_name,RAMQ:t.RAMQ,ramq_expiry_selected_month:"0",ramq_expiry_selected_year:"0",noRAMQ:t.noRAMQ,gender:t.gender,preferred_language:t.preferred_language,date_of_birth:null,source:"web"};l.date_of_birth=[t.birthYear,t.birthMonth,t.birthDay].join("-"),t.noRAMQ||(l.RAMQ_expiry_date=t.ramq_expiry_selected_year+"-"+("0"+t.ramq_expiry_selected_month).slice(-2)+"-01"),1==t.skipvalidation&&(l.skip_ramq_validation=!0),n.signUp(l).then(function(){return a.logIn({email:t.email,password:t.password}).then(function(n){e.info(n),t.skipvalidation=!1;var a={email:t.email,password:t.password,roles:["user"],token:n.token};i.login(a),o.go("pin-confirmation")})}).catch(function(n){t.formData.mobile=t.formData.mobile.replace("+1",""),e.info("signUp::Error",n.data.message,n),t.mobile=t.mobile.replace("+1","");var a=n.data.message,i=n.data.errors;420==n.status?(t.skipvalidation=!0,errorAlert(a+"\n"+i[0])):"undefined"==typeof i&&420!=n.status?(errorAlert(a+"\n You will be redirected to the login page"),o.go("login")):(i=i[Object.keys(n.data.errors)[0]],errorAlert(a+"\n"+i[0])),t.formData.mobile="",t.showButton=!0})}else errorAlert(d.dob);else errorAlert(d.gender);else errorAlert(d.terms)},t}]),angular.module("dashboard").controller("NewProfileCtrl",["$log","$scope","$state","$timeout","$rootScope","MyProfileService","$stateParams","localStorageService",function(e,t,o,n,a,i,r,l){document.getElementById("mobile_input").click(),t.newRelations={first_name:"",last_name:"",relationship:null,RAMQ:"",ramq_expiry_selected_month:"0",ramq_expiry_selected_year:"0",noRAMQ:!1,date_of_birth:null,gender:"",preferred_language:"en",sendNotifications:!1,email:"",mobile_phone:""};var s=(new Date).getFullYear();t.availableYears=[];for(var p=s;p>=1920;p--)t.availableYears.push(p);t.birthMonth="",t.birthDay="",t.birthYear="",r.id&&i.showRelation(r.id).then(function(e){if(t.AccountInfo=e,delete t.AccountInfo.preferred_facility_id,delete t.AccountInfo.family_doctor_id,t.AccountInfo.mobile_phone=t.AccountInfo.mobile_phone.replace("+1",""),t.AccountInfo.ramq_expiry_selected_month,t.AccountInfo.ramq_expiry_selected_year,t.AccountInfo.RAMQ_expiry_date){var o=t.AccountInfo.RAMQ_expiry_date.split("-");console.log("aDate",o),t.AccountInfo.ramq_expiry_selected_month=o[1],t.AccountInfo.ramq_expiry_selected_year=o[0]}var n=t.AccountInfo.date_of_birth,a=/(\d{4})\.(\d{2})\.(\d{2})/,i=new Date(n.replace(a,"$3-$2-$1"));t.AccountInfo.date_of_birth=i,t.birthYear=parseInt(n.split("-")[0]),t.birthDay=n.slice(8,10),t.birthMonth=n.split("-")[1].split("-")[0],console.log(t.birthMonth,t.birthYear,t.birthDay),t.AccountInfo.gender=t.AccountInfo.gender.toString(),t.newRelations=t.AccountInfo,document.getElementById("mobile_input").click()}).catch(function(e){errorAlert(e),document.getElementById("mobile_input").click()});var c={name:"Please enter first and last name",dob:"Please enter date of birth",gender:"Please select a gender",relationship:"Please select a relationship type",ramq:"Please enter a RAMQ number",phone:"You must enter a contact phone",digits:"You phone must be 10 digits long",phone_start:"Phone number can't start with number 1",emal:"You must enter a contact email"};if("FR"==l.get("language"))var c={name:"S'il vous plaît entrer votre prénom et votre nom de famille",dob:"S'il vous plaît entrer votre date de naissance",gender:"S'il vous plaît choisissez le sexe",relationship:"S'il vous plaît indiquer votre relation avec cette personne",ramq:"S'il vous plaît entrer votre numéro de RAMQ",phone:"Vous devez entrer un numéro de téléphone valide",digits:"Votre numéro de téléphone doit contenir 10 chiffres",phone_start:"Votre numéro de téléphone ne peut pas commencer par le chiffre 1",emal:"Vous devez entrer une adresse courriel valide"};t.showButton=!0,t.addRelation=function(){var n={};t.newRelations.first_name&&t.newRelations.last_name?t.birthMonth&&t.birthDay&&t.birthYear?t.newRelations.gender?"Nature"==t.newRelations.relationship?errorAlert(c.relationship):t.newRelations.noRAMQ||t.newRelations.RAMQ?t.newRelations.sendNotifications&&0==t.newRelations.mobile_phone.length?errorAlert(c.phone):t.newRelations.mobile_phone.replace(/[^a-zA-Z0-9\+]/g,"").length<10&&t.newRelations.sendNotifications?errorAlert(c.digits):"1"==t.newRelations.mobile_phone.slice(1,2)?errorAlert(c.phone_start):t.newRelations.sendNotifications&&0==t.newRelations.email.length?errorAlert(c.email):(t.showButton=!1,angular.copy(t.newRelations,n),n.date_of_birth=[t.birthYear,t.birthMonth,t.birthDay].join("-"),(t.newRelations.sendNotifications&&t.newRelations.mobile_phone.length>0||t.newRelations.mobile_phone.length>0)&&(n.mobile_phone="+1"+n.mobile_phone,n.mobile_phone=n.mobile_phone.replace(/[^a-zA-Z0-9\+]/g,"")),t.newRelations.noRAMQ?(delete n.RAMQ,delete n.RAMQ_expiry_date):(n.RAMQ=t.newRelations.RAMQ,n.RAMQ_expiry_date=t.newRelations.ramq_expiry_selected_year+"-"+("0"+t.newRelations.ramq_expiry_selected_month).slice(-2)+"-01"),n.preferred_language=t.newRelations.preferred_language,n.sendNotifications=t.newRelations.sendNotifications,delete n.ramq_expiry_selected_year,delete n.ramq_expiry_selected_month,r.id?(i.updateRelation(n).then(i.getRelations()).then(function(){o.go("welcome")}).catch(function(e){errorAlert("An API error: \n\n"+JSON.stringify(e)),document.getElementById("mobile_input").click()}),t.showButton=!0):i.addRelation(n).then(function(e){t.rel=e,o.go("welcome")}).catch(function(o){e.error("Error",o),errorAlert("An API error: \n\n"+JSON.stringify(o)),document.getElementById("mobile_input").click(),t.showButton=!0})):errorAlert(c.ramq):errorAlert(c.gender):errorAlert(c.dob):errorAlert(c.name)},t.deleteRelation=function(){e.info("MyProfileEditRelationsCtrl::updateRelation",t.newRelations);var n={};angular.copy(t.newRelations,n),i.deleteLocation(n).then(function(t){e.info("deleteLocation ",t),o.go("welcome")}).catch(function(t){e.error("Error",t),alert(JSON.stringify(t))})}}]),angular.module("dashboard").controller("PinConfirmationCtrl",["$log","$scope","$state","$timeout","$rootScope","MyProfileService","localStorageService",function(e,t,o,n,a,i,r){return e.info(a.sent),t.user_pin="",t.user_phone="",t.pinPassed="",i.get().then(function(e){t.userInformation=e,t.user_phone=e.mobile_phone,t.user_pin=e.pin,t.pinPassed=e.phone_is_verified,t.pinPassed&&(o.go("welcome"),r.set("isLogged",!0)),null==t.user_phone&&(errorAlert("Error","Number you added in signup process is not capable of receiving SMS messages, to continue please add ."),t.showPopup=!0)}).catch(function(e){errorAlert(e)}),t.updateMobile=function(){t.mobile_phone="+1"+t.mobile_phone,t.mobile_phone=t.mobile_phone.replace(/[^a-zA-Z0-9\+]/g,""),console.log(t.userInformation),t.userInformation.mobile_phone=t.mobile_phone,delete t.userInformation.RAMQ,delete t.userInformation.RAMQ_expiry_date,t.userInformation.RAMQ||(delete t.userInformation.RAMQ,delete t.userInformation.RAMQ_expiry_date),t.userInformation.JGH_unit_number||delete t.userInformation.JGH_unit_number,i.update(t.userInformation).then(function(e){console.log("mobile update response",e)}).catch(function(e){errorAlert(e)})},t.sendConfirmation=function(){var e={pin:t.user_pin};e.pin?i.checkPin(e).then(function(){o.go("welcome"),r.set("isLogged",!0)}).catch(function(e){errorAlert(e)}):errorAlert("Please enter PIN")},t}]),angular.module("dashboard").controller("MainCtrl",["$log","$scope","$state","$timeout","$rootScope","MyProfileService","AuthService","ClinicsFactory","localStorageService","$translate",function(e,t,o,n,a,i,r,l,s,p){e.log("Main Controller"),a.$on("$stateChangeStart",function(){a.user=r.getCurrentUser(),a.showTheMainLoader=!0,a.userLogged=s.get("isLogged"),a.selectedId=s.get("selectedUserId"),i.getRelations().then(function(o){e.info(o),t.rel=o}).catch(function(e){errorAlert(e)}),i.get().then(function(e){t.profile=e,s.set("currentUser",t.profile),c={id:"",first_name:"",last_name:""},a.showTheMainLoader=!1,t.profile.id&&s.set("isLogged",!0)
}).catch(function(e){errorAlert(e),a.showTheMainLoader=!1})});var c="";return i.get().then(function(e){t.profile=e,c={id:"",first_name:"",last_name:""}}).catch(function(e){errorAlert(e)}),c={id:null},i.getRelations().then(function(e){t.rel=e}).catch(function(e){errorAlert(e)}),t.chooseUser=function(e){"new"==e?o.go("new-profile-info"):t.profile.id.toString()!=e?o.go("edit-profile-info",{id:e}):o.go("edit-user-info",{id:e})},t.logout=function(){e.info("AppCtrl::logout"),r.logout(),s.set("isLogged",!1),t.user=r.getCurrentUser(),o.go("login")},a.selectedId=s.get("selectedUserId"),t.lang=s.get("language"),t.lang=p.use(),t.changeLanguage=function(o){p.use(o),s.set("language",o),t.lang=p.use(),e.info(t.lang),location.reload()},t.lang=p.use(),t}]).controller("LangCtrl",["$log","$translate",function(e,t){return e.info("LangCtrl initialized"),$scope.changeLanguage=function(e){t.use(e),localStorageService.setItem("language",e),$scope.lang=t.use()},$scope.lang=t.use(),$scope}]),angular.module("dashboard").config(["$mdDateLocaleProvider",function(e){e.formatDate=function(e){return moment(e).format("YYYY-MM-DD")}}]),angular.module("dashboard").controller("LoginCtrl",["$log","$scope","$state","$timeout","$rootScope","LoginService","AuthService","MyProfileService","localStorageService",function(e,t,o,n,a,i,r,l,s){return t.formData={email:"",password:""},t.logIn=function(){e.info("LoginCtrl::logIn");var n={email:t.formData.email,password:t.formData.password},a={mail:"Please fill the email field",pass:"Please fill the password field"};if("FR"==s.get("language"))var a={mail:"Veuillez remplir le champ du courriel",pass:"Veuillez remplir le champ du mot de passe"};t.formData.email?t.formData.password?i.logIn(n).then(function(t){e.info(t),n.token=t.token,n.roles=["user"],r.login(n),l.show().then(function(t){e.info(t),n.profile=t.data,r.login(n),s.set("isLogged",!0),o.go("welcome")}).catch(function(t){e.error(t)})}).catch(function(o){e.error(o),errorAlert(o.data.errors[0]),somethingWrong.then(function(){t.formData.password=""})}):errorAlert(a.pass):errorAlert(a.mail)},t}]),angular.module("dashboard").factory("LoginService",["$log","$http","$q","$httpParamSerializerJQLike","apiUrl",function(e,t,o,n,a){function i(e){return t({method:"POST",url:[a,"auth"].join("/"),headers:{"content-type":"application/x-www-form-urlencoded","cache-control":"no-cache"},data:n(e)}).then(function(e){return e.data})}var r={logIn:i};return r}]),angular.module("dashboard").factory("LocalStorage",["$window",function(e){function t(t,o){o?((angular.isArray(o)||angular.isObject(o))&&(o=JSON.stringify(o)),e.localStorage[t]=o):e.localStorage.removeItem(t)}function o(t){return void 0===e.localStorage[t]?null:JSON.parse(e.localStorage[t])}var n={set:t,get:o};return n}]),angular.module("dashboard").controller("HomeCtrl",["$log","$scope",function(e){e.log("Home Controller")}]),angular.module("dashboard").controller("ForgotCtrl",["$log","$scope","$state","$timeout","$rootScope","MyProfileService","localStorageService",function(e,t,o,n,a,i,r){a.sent=!1,t.user_email="",t.sentReset=function(){e.info("Forgot ctrl send function");var o={email:t.user_email},n="Please fill in the email field";"FR"==r.get("language")&&(n="Vous devez entrer une adresse courriel valide"),a.sent=!0,t.user_email?i.resetPassword(o).then(function(e){if("undefined"==typeof e.status)var t=!0;if(t||422!=e.status)console.log(e.data.message),successAlert("",e.data.message);else{var o=e.data.errors,n="";angular.forEach(o,function(e){n+=e+"\n"}),errorAlert(e.data.message,n)}}):errorAlert(n)}}]),angular.module("dashboard").controller("ConfirmAppointmentCtrl",["$log","$scope","$state","$timeout","$rootScope","MyProfileService","AppointmentsFactory","AuthService","localStorageService",function(e,t,o,n,a,i,r,l,s){t.apptData=s.get("appointmentInformation");var p=s.get("appointmentIds");t.frenchDates="FR"==s.get("language")?!0:!1,(null==p||null==t.apptData||"undefined"==typeof p.doctor_availability_ids||null==p.doctor_availability_ids)&&o.go("choose-appointment"),l.getCurrentUser()?(t.userInfo=s.get("currentUser"),console.log("userprofile",t.userInfo),t.userInfo.id==a.selectedId?t.formData={id:t.userInfo.id.toString(),first_name:t.userInfo.first_name,last_name:t.userInfo.last_name,text:""}:i.showRelation(a.selectedId).then(function(e){t.formData={id:e.id.toString(),first_name:e.first_name,last_name:e.last_name,text:""}}).catch(function(e){errorAlert(e)})):o.go("login"),t.confirm=function(){r.book(p).then(function(t){e.info(t),o.go("appointment-confirmed")}).catch(function(e){errorAlert(e),o.go("choose-appointment")})}}]),angular.module("dashboard").directive("clinicName",["ClinicsFactory",function(e){return{scope:{},restrict:"E",template:"{{clinicName}}",link:function(t){t.clinicName="",e.getClinicName().then(function(e){t.clinicName=e}).catch(function(e){errorAlert(e)})}}}]),angular.module("dashboard").factory("ClinicsFactory",["$log","$http","$q","apiUrl","AuthService",function(e,t,o,n,a){function i(){return e.info("ClinicsFactory::list"),t({method:"GET",url:n+"/facilities",headers:{"Content-Type":"application/json",Authorization:"bearer "+a.getToken()}}).then(function(e){return e.data.data}).catch(E)}function r(i){return e.info("ClinicsFactory::addPreferred"),a.getCurrentUser()?t({method:"POST",url:n+"/facilities",headers:{"Content-Type":"application/json",Authorization:"bearer "+a.getToken()},data:{facility_id:i}}).then(function(e){return e.data}).catch(E):(e.info("ClinicsFactory::addPreferred","User is not logged in !?"),o.resolve([]))}function l(i){return e.info("ClinicsFactory::editPreferred"),a.getCurrentUser()?t({method:"PUT",url:n+"/facilities",headers:{"Content-Type":"application/json",Authorization:"bearer "+a.getToken()},data:{facility_id:i}}).then(function(e){return e.data}).catch(E):(e.info("ClinicsFactory::editPreferred","User is not logged in !?"),o.resolve([]))}function s(){return e.info("ClinicsFactory::getNetworks"),a.getCurrentUser()?t({method:"GET",url:n+"/facilities/networks",headers:{"Content-Type":"application/json",Authorization:"bearer "+a.getToken()}}).then(function(e){return e.data.data}).catch(E):(e.info("ClinicsFactory::getNetworks","User is not logged in !?"),o.resolve([]))}function p(){return e.info("MyProfileClinicService::show"),a.getCurrentUser()?t({method:"GET",url:[n,"preferred-facilities"].join("/"),headers:{"Content-Type":"application/json",Authorization:"bearer "+a.getToken()}}).then(function(t){return e.info(t),t.data.data}).catch(function(t){e.info(t)}):(e.info("MyProfileClinicService::show","User is not logged in !?"),o.resolve(null))}function c(i,r){return e.info("MyProfileClinicService::update"),a.getCurrentUser()?t({method:"PATCH",url:[n,"preferred-facilities",i].join("/"),headers:{"Content-Type":"application/json",Authorization:"bearer "+a.getToken()},data:{facility_id:r.id}}).then(function(t){return e.info(t),t.data.data}).catch(function(t){e.info(t)}):(e.info("MyProfileClinicService::update","User is not logged in !?"),o.resolve(null))}function d(i){return e.info("MyProfileClinicService::create"),a.getCurrentUser()?t({method:"POST",url:[n,"preferred-facilities"].join("/"),headers:{"Content-Type":"application/json",Authorization:"bearer "+a.getToken()},data:{facility_id:i.id}}).then(function(t){return e.info(t),t.data.data}).catch(function(t){e.info(t)}):(e.info("MyProfileClinicService::create","User is not logged in !?"),o.resolve(null))}function u(){return e.info("MyProfileClinicService::facilities"),a.getCurrentUser()?t({method:"GET",url:[n,"facilities"].join("/"),headers:{"Content-Type":"application/json",Authorization:"bearer "+a.getToken()}}).then(function(t){return e.info(t),t.data.data}).catch(function(t){e.info(t)}):(e.info("MyProfileClinicService::facilities","User is not logged in !?"),o.resolve(null))}function m(o){return e.info("MyProfileService:: list all doctors"),t({method:"GET",url:"../api/doctors/specialty/"+o,headers:{"Content-Type":"application/json",Authorization:"bearer "+a.getToken()}}).then(function(e){return e.data.data}).catch(function(e){errorAlert(e)})}function v(o,i){return e.info("MyProfileService:: save doctor"),e.info("login token bleble",a.getToken()),t({method:"POST",url:n+"/family-doctor",headers:{"Content-Type":"application/json",Authorization:"bearer "+a.getToken()},data:i}).then(function(e){return e.data.data}).catch(function(e){errorAlert(e)})}function h(){return e.info("MyProfileService:: get primary doctor"),t({method:"GET",url:n+"/family-doctor",headers:{"Content-Type":"application/json",Authorization:"bearer "+a.getToken()}}).then(function(e){return e.data.data}).catch(function(e){errorAlert(e)})}function g(){return e.info("MyProfileService:: get clinic name from subdomain"),t({method:"GET",url:"../api/",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.getToken()}}).then(function(e){return e.data.data.name}).catch(function(e){console.log("redirecting "+e),window.location="https://www.tapmedical.ca"})}function f(e){return t({method:"GET",url:n+"/doctors/flow/"+e,headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.getToken()}}).then(function(e){return e.data.data}).catch(function(){console.log("Error - no clinic")})}function E(){}for(var _={list:i,addPreferred:r,editPreferred:l,getNetworks:s,show:p,create:d,update:c,facilities:u,getDoctors:m,saveDoctor:v,primaryDoctor:h,getClinicName:g,getFlowDoctors:f},R=window.location.host.split(".").length,A="",T=1;R>T;T++)A+=window.location.host.split(".")[T]+".",T==R-1&&(A=A.slice(0,-1));return _}]),angular.module("dashboard").controller("ChooseAppointmentCtrl",["$log","$scope","$state","$timeout","$rootScope","SpecialtiesFactory","AvailabilitiesFactory","ClinicsFactory","AppointmentsFactory","AuthService","localStorageService","$stateParams",function(e,t,o,n,a,i,r,l,s,p,c,d){e.info(a.sent),t.specialties=[],i.list().then(function(e){t.specialties=e}).catch(function(){e.info(res)}),t.type=c.get("apptType"),t.type||o.go("appointment-type");var u="Sorry",m="No available time slots for any doctor",v="No doctors with selected specialty";if("FR"==c.get("language"))var u="Pardon",m="Pas de créneaux horaires disponibles pour tout médecin",v="Aucun médecin avec spécialité sélectionnée";t.followUp=!1,t.changeFollowup=function(){t.followUp=!t.followUp,t.search()},t.myDate=new Date,t.minDate=new Date(t.myDate.getFullYear(),t.myDate.getMonth(),t.myDate.getDate()),t.maxDate=new Date(t.myDate.getFullYear(),t.myDate.getMonth()+2,t.myDate.getDate()),t.onlyWeekendsPredicate=function(e){var t=e.getDay();return 0===t||6===t};var h={is_follow_up:t.followUp};t.appointmentsList=[],t.disableDoctor=!0,t.preferred_time="anytime",t.doctorsList=[],t.doctor="",t.specialtySelect=function(e){t.specialtyName="",t.idValue=e,t.specialty=e,console.log("specialty id"+e);for(var o=0;o<t.specialties.length;o++)t.idValue==t.specialties[o].id&&(t.specialtyName=t.specialties[o].name);t.showLoader=!0,l.getDoctors(e).then(function(e){e.length>0?(t.disableDoctor=!1,t.doctorsList=e,t.doctor=""):(t.disableDoctor=!0,errorAlert(u,v)),t.showLoader=!1})},t.reserve=function(e){var n={ids:{account_id:t.profile.id,doctor_availability_ids:e.id},appt:e};c.set("appointmentInformation",n.appt),c.set("appointmentIds",n.ids),s.saveData(n),o.go(p.getToken()?"welcome":"login")},t.search=function(){("specialist"!=t.type||t.specialty)&&(t.showLoader=!0,h.date=t.myDate.getFullYear()+"-"+("0"+(t.myDate.getMonth()+1)).slice(-2)+"-"+("0"+t.myDate.getDate()).slice(-2),"morning"===t.preferred_time?(h.from_time="7:00:00",h.to_time="12:00:00"):"afternoon"===t.preferred_time?(h.from_time="12:00:00",h.to_time="17:00:00"):"evening"===t.preferred_time?(h.from_time="17:00:00",h.to_time="22:00:00"):(h.from_time="07:00:00",h.to_time="23:59:59"),t.frenchDates="FR"==c.get("language")?!0:!1,t.doctor&&(h.doctor_id=t.doctor),h.specialty_id=t.specialty,h.is_follow_up=t.followUp,r.search(h).then(function(o){e.info("ConsultSpecialistCtrl::search results",o),o.length>0?(t.appointmentsList=o,t.showLoader=!1,t.disableDoctor=!1):(t.disableDoctor=!0,t.showLoader=!1,errorAlert(u,m))}))},d.docId&&d.specId&&(t.specialty=parseInt(d.specId),t.doctor=d.docId,t.specialtySelect(d.specId),t.search());var g=window.navigator.userAgent,f=g.indexOf("MSIE "),E=!1;"specialist"!=t.type&&(l.getFlowDoctors(t.type).then(function(e){t.doctorsList=e,t.doctor=""}).catch(function(e){errorAlert(e)}),t.showLoader=!0,h.date=t.myDate.getFullYear()+"-"+("0"+(t.myDate.getMonth()+1)).slice(-2)+"-"+("0"+t.myDate.getDate()).slice(-2),"morning"===t.preferred_time?(h.from_time="7:00:00",h.to_time="12:00:00"):"afternoon"===t.preferred_time?(h.from_time="12:00:00",h.to_time="17:00:00"):"evening"===t.preferred_time?(h.from_time="17:00:00",h.to_time="22:00:00"):(h.from_time="07:00:00",h.to_time="23:59:59"),t.frenchDates="FR"==c.get("language")?!0:!1,h.specialty_id=t.specialty,t.doctor&&(h.doctor_id=t.doctor),r.search(h).then(function(o){e.info("ConsultSpecialistCtrl::search results",o),o.length>0?(t.appointmentsList=o,t.showLoader=!1,t.disableDoctor=!1):(t.disableDoctor=!0,t.showLoader=!1,errorAlert(u,m))})),f>0&&(E=!0),E&&(o.is("unsupported")||o.go("unsupported"))}]),angular.module("dashboard").factory("AuthService",["$q","LocalStorage",function(e,t){function o(e){console.log("AuthService.login",e),c=e,t.set(p,e)}function n(){c=null,t.set(p,null)}function a(e){return angular.isArray(e)||(e=[e]),i()&&-1!==e.indexOf(c.role)}function i(){return!!c}function r(){return c}function l(){if(c&&c.token)return c.token;var e=new Date,t=e.getMonth()+1,o=e.getDate();10>t&&(t="0"+t),10>o&&(o="0"+o);var n=sjcl.hash.sha256.hash("tapmedical"+e.getFullYear()+"-"+t+"-"+o),a=sjcl.codec.hex.fromBits(n);return console.log("tapmedical"+e.getFullYear()+"-"+t+"-"+o),a}var s={login:o,logout:n,isAuthorized:a,isAuthenticated:i,getCurrentUser:r,getToken:l},p="currentUser",c=t.get(p);return s}]),angular.module("dashboard").factory("AppointmentsFactory",["$log","$state","$http","$q","AuthService","apiUrl","localStorageService",function(e,t,o,n,a,i,r){function l(e){E=e}function s(){return void 0!==E?E.ids:void g()}function p(){return void 0!==E?E.appt:void g()}function c(){return e.info("AppointmentsFactory::list"),a.getCurrentUser()?o({method:"GET",url:i+"/appointments",headers:{"Content-Type":"application/json",Authorization:"bearer "+a.getToken()}}).then(function(e){return e.data.data}).catch(f):(e.info("AppointmentsFactory::list","User is not logged in !?"),n.resolve([]))}function d(){return e.info("AppointmentsFactory::history"),a.getCurrentUser()?o({method:"GET",url:i+"/appointments?history=1",headers:{"Content-Type":"application/json",Authorization:"bearer "+a.getToken()}}).then(function(e){return e.data.data}).catch(f):(e.info("AppointmentsFactory::history","User is not logged in !?"),n.resolve([]))}function u(t){return t.reason_for_visit=r.get("reasonText"),e.info("AppointmentsFactory::book"),a.getCurrentUser()?o({method:"POST",url:i+"/appointments",headers:{"Content-Type":"application/json",Authorization:"bearer "+a.getToken()},data:t}).then(function(e){return e.data.data}).catch(f):(e.info("AppointmentsFactory::history","User is not logged in !?"),n.resolve([]))}function m(t,r){if(e.info("AppointmentsFactory::update",t),a.getCurrentUser()){{a.getCurrentUser()}return o({method:"PUT",url:i+"/appointments/"+t,headers:{"Content-Type":"application/json",Authorization:"bearer "+a.getToken()},data:r}).then(function(e){return console.log(e),e}).catch(f)}return e.info("AppointmentsFactory::update","User is not logged in !?"),n.resolve([])}function v(t){return e.info("AppointmentsFactory::delete"),a.getCurrentUser()?o({method:"DELETE",url:i+"/appointments/"+t,headers:{"Content-Type":"application/json",Authorization:"bearer "+a.getToken()}}).then(function(e){return e.data.data}).catch(f):(e.info("AppointmentsFactory::delete","User is not logged in !?"),n.resolve([]))}function h(){return appointments[appointments.length-1]}function g(){t.go("choose-appointment")}function f(e){return n.reject(angular.isObject(e.data)&&e.data.message?e.data.message:"An unknown error occurred.")}var E,_={list:c,history:d,book:u,update:m,"delete":v,getLast:h,saveData:l,getIds:s,getApptData:p};return _}]),angular.module("dashboard").controller("ApptTypeCtrl",["$log","$scope","$state","$timeout","$rootScope","MyProfileService","localStorageService",function(e,t,o,n,a,i,r){t.chooseType=function(e){r.set("apptType",e),o.go("choose-appointment")}}]),angular.module("dashboard").controller("AppointmentConfirmedCtrl",["$log","$scope","$state","$timeout","$rootScope","MyProfileService","AppointmentsFactory","localStorageService","AuthService",function(e,t,o,n,a,i,r,l,s){t.apptData=l.get("appointmentInformation"),t.frenchDates="FR"==l.get("language")?!0:!1,null==t.apptData&&o.go("appointment-type"),s.getCurrentUser()?(t.userInfo=l.get("currentUser"),console.log(t.userInfo),t.userInfo.id==a.selectedId?t.formData={id:t.userInfo.id.toString(),first_name:t.userInfo.first_name,last_name:t.userInfo.last_name,email:t.userInfo.email}:i.showRelation(a.selectedId).then(function(e){if(t.formData={id:e.id.toString(),first_name:e.first_name,last_name:e.last_name,text:"",email:e.email},!t.formData.email.length>0){var o=l.get("currentUser");t.formData.email=o.email,console.log("current",o)}setTimeout(function(){l.set("selectedUserId",null)},1e3)}).catch(function(e){errorAlert(e)})):o.go("login");var p=t.apptData.date+" "+t.apptData.start_time.slice(0,5);t.showCal=!1,t.toggleCalendar=function(){t.showCal=t.showCal?!1:!0},setTimeout(function(){l.set("appointmentInformation",null),l.set("appointmentIds",null)},3e3);var c=createCalendar({options:{"class":""},data:{title:"Appointment with "+t.apptData.doctor.first_name+" "+t.apptData.doctor.last_name,start:new Date(p),duration:120,end:"",address:t.apptData.facility.address_line,description:"Appointment with a doctor"}});document.querySelector(".calendar-spot").appendChild(c)}]),function(e){var t=6e4,o=function(e){return e.toISOString().replace(/-|:|\.\d+/g,"")},n=function(e){return o(e.end?e.end:new Date(e.start.getTime()+e.duration*t))},a={google:function(e){var t=o(e.start),a=n(e),i=encodeURI(["https://www.google.com/calendar/render","?action=TEMPLATE","&text="+(e.title||""),"&dates="+(t||""),"/"+(a||""),"&details="+(e.description||""),"&location="+(e.address||""),"&sprop=&sprop=name:"].join(""));return'<a class="icon-google calendar-icon" ng-show="showCal" target="_blank" href="'+i+'">Google Calendar</a>'},yahoo:function(e){var n=e.end?(e.end.getTime()-e.start.getTime())/t:e.duration,a=600>n?"0"+Math.floor(n/60):Math.floor(n/60)+"",i=10>n%60?"0"+n%60:n%60+"",r=a+i,l=o(new Date(e.start-e.start.getTimezoneOffset()*t))||"",s=encodeURI(["http://calendar.yahoo.com/?v=60&view=d&type=20","&title="+(e.title||""),"&st="+l,"&dur="+(r||""),"&desc="+(e.description||""),"&in_loc="+(e.address||"")].join(""));return'<a class="icon-yahoo calendar-icon" ng-show="showCal" target="_blank" href="'+s+'">Yahoo! Calendar</a>'},ics:function(e,t,a){var i=o(e.start),r=n(e),l=encodeURI("data:text/calendar;charset=utf8,"+["BEGIN:VCALENDAR","VERSION:2.0","BEGIN:VEVENT","URL:"+document.URL,"DTSTART:"+(i||""),"DTEND:"+(r||""),"SUMMARY:"+(e.title||""),"DESCRIPTION:"+(e.description||""),"LOCATION:"+(e.address||""),"END:VEVENT","END:VCALENDAR"].join("\n"));return'<a class="calendar-icon  ng-show="showCal"'+t+'" target="_blank" href="'+l+'">'+a+" Calendar</a>"},ical:function(e){return this.ics(e,"icon-ical","iCal")},outlook:function(e){return this.ics(e,"icon-outlook","Outlook")}},i=function(e){return{google:a.google(e),yahoo:a.yahoo(e),ical:a.ical(e),outlook:a.outlook(e)}},r=function(){document.getElementById("ouical-css")||document.getElementsByTagName("head")[0].appendChild(l())},l=function(){var e=document.createElement("style");return e.id="ouical-css",e.innerHTML="#add-to-calendar-checkbox-label{cursor:pointer}.add-to-calendar-checkbox~a{display:none}.add-to-calendar-checkbox:checked~a{display:block;width:150px;margin-left:20px}input[type=checkbox].add-to-calendar-checkbox{position:absolute;top:-9999px;left:-9999px}.add-to-calendar-checkbox~a:before{width:16px;height:16px;display:inline-block;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAAAQCAYAAACIoli7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0MzJCRDU2NUE1MDIxMUUyOTY1Q0EwNTkxNEJDOUIwNCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0MzJCRDU2NkE1MDIxMUUyOTY1Q0EwNTkxNEJDOUIwNCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjQzMkJENTYzQTUwMjExRTI5NjVDQTA1OTE0QkM5QjA0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQzMkJENTY0QTUwMjExRTI5NjVDQTA1OTE0QkM5QjA0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+1Gcb3QAACh1JREFUeNrEWAtwVNUZ/u7d9yvZJBtMIC8eBhIKMkQIhqIBKirWwpSW0dahCir1gQhWg2XKjNRqR7AjQ6QjglBFRIW20KmC0KRYjRYMCZGHGEjIY0Oy2U32lX3d3Xv6nxuSbEJCQNvpn/n33POfxz33u9//uBGaBQFcMhgrpGYC6ddk+zfiZKgxsvOG4buJMGATNtzcq4l+WStbsGgpvOiELpgBWetGQGNCstSGkKwH1Ek04oVNFUZQsEAjedCg0iBRVivrP737CL+H8Na7f7lpRFa2cOfMqdUn9n3ARGc7NLEYJj62Qle6Z3/ZlATt82mINV4QVPV33HVXmK/1bRgPvst60vzXgJzZZ84UlOfnV1L/YvwhBxk7Q7quZ3zZLrvSivRy+PtR0Y8oUit2P7+aWm5TifxahErVPWfd/JRBQaNVjA2CIhsecEwIubHzB3+CQWNDNBCCyuiEC6NgpV3agkCszYWknBTInjAMFh20HAo1/QQFVM7Kw9aly7D1ze2iJEemhbu8Mzf++rkVNGMkaS7puKadb0yubGscp/Wa3rc0nNXVJ6RsJvsaUhmXt5oyZv36e4o//hi1tbUonjWrYNTs2QXxhywuL+8bmzevoG7dOu3gj8Po2MIVZGIcAw6TcPma0YV4JfXYEBiy/rbeqZcv+i1tEbIgagzgOAWMerT5MvDuXgfOH6vAsRoRgVAqHOp2TMrX4dYfFmLhVAHTRqtgkn0QQ3W0anZK+UsvzJe/qflxi2d04a3u9iJWdngUHd/I33KEyJEoqBE2mqCxGBCqq//p8idWvPh66Wa35ZlzUIcAnez3w+n14uwDD8CalYWo293vYePH+Fy+Jn58289HKu2rpbux9KF7EY4yfHroAHKL5iv2w/v2Ye7CBfBHBLRWHYJ54rzrCQcsDtx+YA4MAbyTqjsHLfLIrWWcChjwu/XHUVnuxrGDC2G2AdwnnKQNXwOLHnwFH4da8VnZBpg0ZqgcOgJMfKa+oqJkTDQMX3or3GF/khgJQ9TroDInQENq9rjItaNwqUWkeDoy0wtmTKYt/8XPpg4wZpADARTt2YOJx45Bo9PBlZEBy86dvQedPGkSxmZnw5SQAD6Xrxns6XWmYO+1x3e+n52D2WM3Y96w6F0F1F4wBwsBprBEv+0wIQO7Xj2HC0ercLbiEdi0zYgyAk1OgFUQccONwP5dyxELNMCQ5Cfq0YZpekgCpMZgENPvmIc5KckEm4gL7+9BrL0d1rFjYSGGGkePgyWX4qU1CQW3zVG5ztV+n25aQRpVGBojkFpWroTBaAQ/TpD6eput3xOZzWaKEjL43IEM3frHLZD8XtyQasXhdzbDbNTCJjN89tftvfaW8jd67fPyzP3jRBzThGGYKgwxrcceM2eyYDQNG9+8iAMfHsaRXY/AouV4qRAS9NCrmmkjKxBKwOQsM8X0iQhQkpK1IUiiBxq1+oLfaPJJXo8lEOyCJtGKScsfhTYpGYItFTUXG9DY2oqQw4UnFi5SGF/2zfkialQcUJ66V7PrFL5mQhwgXGRZZjv+8ALzBGPM4YuyA9s3sFMtIUW5/Xx7hNU0+RU7X7OM5bFlJxSQ2ODR+ArlIUy5HDjW04y+t5UrC9J5Vm5tYxkz/s5YF3WiESYzP2MRmbmp6+EH9vuZxM9N9iBz0ViUHbclsPuX/GJ2SUnJeX+LnUW6/MqzHTp6lL29dy9rtLewx598kpWsWcPuu+8+Fo1GlfG9+/bZn1q1Kk1JzHQSlUxHjBL7rkX5XL5mMBQks7WvY0vvZ3d4pW63j7Nfo/QDfYCbs3iGa6UORYMUP/92qhoYE4VsdNCoDEEyUYqnhBIDEmJ8hZYenKdmETH6468pWa3GJbvdHpKiTWpio4YSz7Hjx7Hu2Wdx9KOPkDkyHaWbNiE/Lw+LFy+makWlHCInOyc9MyOTJ3JRzcEhnCHHYtf0dCJtwrrp3Suvv/UGvO4uWBLN2L9/N7xeFzyedrS43+q1F401DQdaP+8Vrg1ppcRS3t+DDVQe9dhFqF3JiHTaIYaTyL2jYIld8IsGWCQRTB+GoCcgiU5q2QCD6KNFdQjrM1FVXeUYd+PYxg6nE+np6ZiYn48dO3Zg7dq1iEQi0Gq1KKeqh1h82T2BURkZQlpa2kzqHuJ1qEph3zCAPnVyDao8X6EgeQowANDlSx7mfo9t772NBQt+pmT5T468jgmFS5TxiqPvdderLO+Kfcnte2X71G9VzCvjulhfZaJFFjJSrCj7/DjCqgh0VN6EvSIsCUAXndxPvDxf1w5t4gjoY1qEnAYUfI8SpuokOlyIBIPhC06nSwHUZDIhNzcXoVAIRF7k5OQoLc83/E1eutSKpuYmRKToLZs3l6Zzhqo5QyPR6FVPfcJZg2lFN6Py80q+kbp2WzLwUEe/OZ2Ovr4YU11przqL/5XoRH3fvakwmjFdQtlH4/FC6VdY/dRNVKEYeMqAUR3EiSo9Vj56As2+MKwGMx68fySm5o+HSeDh6FLM7/fVu1zO3v24axcUFJDneZX+SkrgXq8PlZUnEKKKwGpNgM/rmaLT66Z1uzwxVBoC0JKqtTjpPtVd8sQ8YJKM+g3W5Ze/HpZ3f9r0kahk5aq41b/st1c8A3uYOQQrr0uyFwep+ujrG6HHip/YsPvlTmz+7dcovnMGZk4gt6cYKXQFMWuyAV98+iOcpfB6e9HzFBvvoS87J9XfynKZWFnfbLfzbwOlmpEkCauffhpejxenvjqF7KxsdPF6PByCz+PH6dOnKVRUW8eMGX1LN0MJ0MgQLl/dVgNb8YjuAj/qRFJhMmYVzkkv/3NZAV6jJPS4W/gWGLDr/Ua/mkQMzQM2T4dN58Q/DxbizuIKLLjtHax7bhqWPJaLVJMWPsXpzah3SWj3n6GQMKf7/wAmP6/65fq6uubGpsaOFntLuqPdARe5v4fY2emi1uej/OBmjjan3+V2tfi8voZYLFoXlaJnjQZDhZoJgi7GXX4IQPNN+Th9sJuhmKuCWM5w5pvqNiSLlfg/yhcLx2PEqA+QqhR/wX5jHirrdbIJI24A/lG9Gqt/U45NWz7Ey9s/BzQ3QpUQQajdjMS0NixdtQhFxTfTGzVQDc6rFJ/85Zdfem6ePr29dMuWdGKi5PV6Ov2BQFMoFL5INXqtx+upd3d21rXY7Y5AIMBvTp8FCJeXl/nVBKNFRa7Ag+xgsnH2K0p79+474Ix1IJWy5qgXuw40MPb8dwFkOFfngA0nY9zqQe1WnrQtzQRSBgwGEXs2zqUHmXvFvCCFLwP/Lw6PdhQLjVqFVIwSkCRFIgdPVp+sI66d7ury1Xrc7saGhkZ7OBziAEpxGotXYYQg/J4CReZwh3fdriqM2IQkrZN1mg/H9joY+4DMvSyt+eQlTL71uf8a+65VfvVw5nDh5Jpl58NHMK5FCT88diaSGi4DFYnTHvDkgTUyl/8IMABtKh8piZwIuwAAAABJRU5ErkJggg==);margin-right:.5em;content:' '}.icon-ical:before{background-position:-68px 0}.icon-outlook:before{}.icon-yahoo:before{background-position:-36px +4px}.icon-google:before{background-position:-52px 0}",e},s=function(e){return void 0!==e.data&&void 0!==e.data.start&&(void 0!==e.data.end||void 0!==e.data.duration)},p=function(e,t,o){var n=document.createElement("div");return n.innerHTML+='<input name="add-to-calendar-checkbox" checked class="add-to-calendar-checkbox" id="checkbox-for-'+o+'" type="checkbox">',Object.keys(e).forEach(function(t){n.innerHTML+=e[t]}),n.className="add-to-calendar",void 0!==t&&(n.className+=" "+t),r(),n.id=o,n},c=function(e){return e.options&&e.options.class?e.options.class:void 0},d=function(e){return e.options&&e.options.id?e.options.id:Math.floor(1e6*Math.random())};e.createCalendar=function(e){return s(e)?p(i(e.data),c(e),d(e)):void console.log("Event details missing.")}}(this),function(){"use strict";function e(e,t,o,n,a){e.debug("runBlock end"),_.isNull(a.get("language"))&&(a.set("language","EN"),console.log("LANGUAGE WAS CHANGED")),t.use(a.get("language")),o.$on("$stateChangeStart",function(){})}e.$inject=["$log","$translate","$rootScope","$state","localStorageService"],angular.module("dashboard").run(e)}(),function(){"use strict";function e(e,t){e.state("login",{url:"/login",templateUrl:"app/login/login.html",controller:"LoginCtrl"}).state("home",{url:"/",templateUrl:"app/common/content.html"}).state("forgot-password",{url:"/forgot-password",templateUrl:"app/forgot-password/forgot-password.html",controller:"ForgotCtrl",controllerAs:"ctrl"}).state("welcome",{url:"/welcome",templateUrl:"app/welcome/welcome.html",controller:"WelcomeCtrl"}).state("appointment-confirmed",{url:"/appointment-confirmed",templateUrl:"app/appointment-confirmed/appointment-confirmed.html",controller:"AppointmentConfirmedCtrl"}).state("choose-appointment",{url:"/choose-appointment",templateUrl:"app/choose-appointment/choose-appointment.html",controller:"ChooseAppointmentCtrl"}).state("appointmentments",{url:"/choose-appointment/:specId/:docId",templateUrl:"app/choose-appointment/choose-appointment.html",controller:"ChooseAppointmentCtrl"}).state("confirm-appointment",{url:"/confirm-appointment",templateUrl:"app/confirm-appointment/confirm-appointment.html",controller:"ConfirmAppointmentCtrl"}).state("new-profile-info",{url:"/new-profile-info",templateUrl:"app/new-profile-info/new-profile-info.html",controller:"NewProfileCtrl"}).state("edit-profile-info",{url:"/edit-profile-info/:id",templateUrl:"app/new-profile-info/edit-profile-info.html",controller:"NewProfileCtrl"}).state("new-user-info",{url:"/new-user-info",templateUrl:"app/new-user-info/new-user-info.html",controller:"NewUserCtrl"}).state("edit-user-info",{url:"/edit-user-info/:id",templateUrl:"app/new-user-info/edit-user-info.html",controller:"UpdateUserInfoCtrl"}).state("unsupported",{url:"/unsupported",templateUrl:"app/common/unsupported.html",controller:"MainCtrl"}).state("terms",{url:"/terms",templateUrl:"app/common/terms.html",controller:"MainCtrl"}).state("pin-confirmation",{url:"/pin-confirmation",templateUrl:"app/pin-confirmation/pin-confirmation.html",controller:"PinConfirmationCtrl"}).state("appointment-type",{url:"/appointment-type",templateUrl:"app/appointment-type/appointment-type.html",controller:"ApptTypeCtrl"}),t.otherwise("/appointment-type")}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("dashboard").config(e)}(),function(){"use strict";angular.module("dashboard").constant("version","1.0.0")}(),function(){"use strict";angular.module("dashboard").constant("apiUrl","../api").constant("fakeToken","eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjYzLCJpc3MiOiJodHRwOlwvXC8xNjIuMjQzLjIyMy42MVwvYXBpXC9hdXRoIiwiaWF0IjoxNDgxMTA4NjEzLCJleHAiOjE0ODg4ODQ2MTMsIm5iZiI6MTQ4MTEwODYxMywianRpIjoiZWIwMmM5YWQ3YzM3MzdmNDY5NDc3ZDVkOGI2NmU1NDUifQ.iEEw8hEqsld8OK8yHw5n6-fzQyFIOzoribnGnI1z3LM").constant("version","1.0.0")}(),function(){"use strict";function e(e,t){e.debugEnabled(!0),t.translations("EN",EN),t.translations("FR",FR),t.preferredLanguage("EN")}e.$inject=["$logProvider","$translateProvider"],angular.module("dashboard").config(e)}(),angular.module("dashboard").run(["$templateCache",function(e){e.put("app/appointment-type/appointment-type.html",'<div ng-include="\'app/common/topnavbar.html\'"></div><div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="nametag"><div class="small-container"><h2 class="underline green">{{\'REASON_CONSULTATION\' | translate}}</h2><p class="">{{\'TYPE_CHOOSE\' | translate}}</p></div></div><div class="medium-container"><div class="choice urgent trans-fast" ng-click="chooseType(\'urgent\')"><h3 class="trans-fast">{{\'URGENT_CARE\' | translate}}</h3><p class="trans-fast">{{\'URGENT_EXP\' | translate}}</p><img src="./assets/img/ic-forward-white@2x.png"></div><div class="choice family trans-fast" ng-click="chooseType(\'family-doctor\')"><h3 class="trans-fast">{{\'FAMILY_DOCTOR\' | translate}}</h3><p class="trans-fast">{{\'FAMILY_DOCTOR_EXP\' | translate}}</p><img src="./assets/img/ic-forward-white@2x.png"></div><div class="choice specialist trans-fast" ng-click="chooseType(\'specialist\')"><h3 class="trans-fast">{{\'SPECIALIST\' | translate}}</h3><p class="trans-fast">{{\'SPECIALIST_EXP\' | translate}}</p><img src="./assets/img/ic-forward-white@2x.png"></div></div></div></div></div>'),e.put("app/appointment-confirmed/appointment-confirmed.html",'<div ng-include="\'app/common/topnavbar.html\'"></div><div class="nametag green"><div class="small-container"><h2 class="underline white">{{\'CONFIRMED_NAME\' | translate}}{{formData.first_name}} {{formData.last_name}} {{\'CONFIRMED_NAME_REST\' | translate}}</h2><p class="">{{\'CONFIRMED_TEXT\' | translate}} {{formData.email}}</p></div></div><div class="small-container text-center"><div class="info-table"><div class="thumb patient"></div><div><span>{{\'PATIENT\' | translate}} -</span> {{formData.first_name}} {{formData.last_name}}</div><div class="thumb physician"></div><div><span>{{\'PHYSICIAN\' | translate}} -</span> {{apptData.doctor.first_name}} {{apptData.doctor.last_name}}</div><div class="thumb location"></div><div><span>{{\'LOCATION\' | translate}} -</span> {{apptData.facility.address_line}} {{apptData.facility.postal_code}}</div><div class="thumb time"></div><div ng-if="!frenchDates"><span>{{\'TIME\' | translate}} -</span> {{apptData.date}} {{apptData.start_time | limitTo: 5}}</div><div ng-if="frenchDates"><span>{{\'TIME\' | translate}} -</span> {{apptData.date_fr}} {{apptData.start_time | limitTo: 5}}</div></div><div class="card reminder">{{\'CONFIRMED_REMINDERS\' | translate}} <span class="card-bg"></span></div><a class="gray margin-top" ng-click="toggleCalendar()">{{\'ADD_TO_CALENDAR\' | translate}}</a><div class="calendar-spot" ng-show="showCal"></div><a ui-sref="appointment-type" class="button green">{{\'BOOK_ANOTHER\' | translate}}</a></div><div class="download-section"><p>{{\'DOWNLOAD_APP_HEADER\' | translate}}</p><p>{{\'DOWNLOAD_APP_TEXT\' | translate}}</p><a class="down-button app"></a> <a class="down-button play"></a></div>'),e.put("app/common/content.html",'<div id="wrapper"><div ng-include="\'app/common/topnavbar.html\'"></div><div ng-include="\'app/common/loader-modal.html\'"></div><div ui-view=""></div><div class="test"></div></div>'),e.put("app/common/terms.html",'<div ng-include="\'app/common/topnavbar.html\'"></div><div class="nametag"><div class="small-container"><h2 class="underline green">Terms & Conditions</h2></div><div class="small-container"><h2>Please read our terms of service</h2><div class=""><p>You must follow any policies made available to you within the Services.</p><p>Don’t misuse our Services. For example, don’t interfere with our Services or try to access them using a method other than the interface and the instructions that we provide.</p><p>You may use our Services only as permitted by law, including applicable export and re-export control laws and regulations.</p><p>We may suspend or stop providing our Services to you if you do not comply with our terms or policies or if we are investigating suspected misconduct.</p><p>Using our Services does not give you ownership of any intellectual property rights in our Services or the content you access.</p><p>You may not use content from our Services unless you obtain permission from its owner or are otherwise permitted by law. These terms do not grant you the right to use any branding or logos used in our Services.</p><p>Don’t remove, obscure, or alter any legal notices displayed in or along with our Services.</p><p>Our Services display some content that is not Google’s. This content is the sole responsibility of the entity that makes it available.</p><a class="button green" href="javascript:history.back()">GO BACK</a></div></div></div>'),e.put("app/common/topnavbar.html",'<header class="header"><div class="lang" ng-class="lang"><a href="javascript:void(0)" data-ng-click="changeLanguage(\'EN\'); search();" ng-value="\'en\'" class="english-switch">EN</a> / <a href="javascript:void(0)" data-ng-click="changeLanguage(\'FR\'); search();" ng-value="\'fr\'" class="french-switch">FR</a></div><h1><clinic-name></clinic-name></h1><h4>{{\'POWERED_BY\' | translate}} <img src="./assets/img/logoTapColour@2x.png"></h4><div class="pull-right navbar-profiles" ng-show="userLogged"><img src="./assets/img/ic-profile-black@3x.png"><div class="drop">Profiles<ul class="pull-left"><li><a ng-click="chooseUser(profile.id)">{{profile.first_name}} {{profile.last_name}}</a></li><li ng-repeat="relative in rel"><a ng-click="chooseUser(relative.id)">{{relative.first_name}} {{relative.last_name}} - {{relative.relationship}}</a></li><li value="new" class="special"><a ng-click="chooseUser(\'new\')">{{\'ADD_NEW_PROFILE\' | translate}} +</a></li></ul></div><a ng-click="logout()" class="button danger" ng-show="userLogged">{{\'LOGOUT\' | translate}}</a></div><div class="modal-body" ng-show="showTheMainLoader"></div></header><div class="clear"></div>'),e.put("app/common/unsupported.html",'<div ng-include="\'app/common/topnavbar.html\'"></div><div class="nametag"><div class="small-container"><h2 class="underline green">{{\'UNSUPPORTED_HEADER\' | translate}}</h2><p class="">{{\'UNSUPPORTED_TEXT\' | translate}}</p><div class="browsers"><img src="./assets/img/chrome@2x.png"> <img src="./assets/img/firefox@2x.png"> <img src="./assets/img/safari@2x.png"><div class="clear"></div><p>Chrome</p><p>Firefox</p><p>Safari</p></div></div></div>'),e.put("app/choose-appointment/choose-appointment.html",'<div ng-include="\'app/common/topnavbar.html\'"></div><div class="nametag"><div class="small-container"><h2 class="underline green">{{\'CHOOSE\' | translate}}</h2><p class="">{{\'CHOOSE_SPECIALTY\' | translate}}<br><clinic-name></clinic-name></p></div></div><div class="range-select"><div class="wide-container choose"><div class="dropdown-row"><select ng-if="type == \'specialist\'" class="" ng-model="specialty" ng-change="specialtySelect(specialty); search(); getSpecialtyName(specialty)"><option selected="" disabled="" value="">{{\'SELECT_SPECIALTY\' | translate}}</option><option ng-repeat="specialty in specialties" ng-value="specialty.id">{{specialty.name}}</option></select><select class="" ng-model="doctor" ng-change="search()"><option selected="" disabled="" value="">{{\'CHOOSE_A_DOCTOR\' | translate}}</option><option ng-repeat="doctor in doctorsList" value="{{doctor.id}}">{{doctor.first_name}} {{doctor.last_name}}</option></select><md-datepicker class="half" ng-model="myDate" md-placeholder="Enter date" md-min-date="minDate" md-max-date="maxDate" ng-change="search()" onkeydown="return false"></md-datepicker><select class="half" ng-model="preferred_time" ng-change="search()"><option selected="" disabled="" value="">{{\'SELECT_TIME\' | translate}}</option><option value="anytime">{{\'ANYTIME\' | translate}}</option><option value="morning">{{\'MORNING\' | translate}}</option><option value="afternoon">{{\'AFTERNOON\' | translate}}</option><option value="evening">{{\'EVENING\' | translate}}</option></select></div><div class="padded-checkbox" ng-if="type == \'specialist\'"><md-checkbox value="" ng-model="followUp" ng-change="changeFollowup();">{{\'IS_FOLLOWUP\' | translate}}</md-checkbox></div><div class="clear"></div><div class="appointment-display" ng-show="disableDoctor"><div class="load-overlay" ng-show="showLoader"></div><span class="gray-itallic">{{\'SPECIALTY_TEXT\' | translate}}</span></div><div class="list-appointments" ng-if="!disableDoctor"><table><thead><th>DATE</th><th>{{\'TIME\' | translate}}</th><th>{{\'PHYSICIAN\' | translate}}</th><th>{{\'SPECIALTY\' | translate}}</th><th></th></thead><tbody><tr ng-repeat="appointment in appointmentsList"><td ng-show="!frenchDates">{{appointment.date_en}}</td><td ng-show="frenchDates">{{appointment.date_fr}}</td><td>{{appointment.start_time | limitTo: 5}}</td><td>{{appointment.doctor.first_name}} {{appointment.doctor.last_name}}</td><td>{{specialtyName}}</td><td><a class="button green" ng-click="reserve(appointment)">{{\'SELECT_APPT_BUTTON\' | translate}}</a></td></tr></tbody></table></div></div></div>'),e.put("app/forgot-password/forgot-password.html",'<div ng-include="\'app/common/topnavbar.html\'"></div><div class="wrapper wrapper-content animated fadeInUp"><div class="row"><div class="col-lg-12"><div class="nametag"><div class="small-container"><h2 class="underline green">{{\'FORGOT_PASSWORD\' | translate}}</h2><p class="">{{\'FORGOT_TEXT\' | translate}}</p></div></div><form class="m-t" role="form" name="loginForm"><div class="small-container"><label>{{\'EMAIL\' | translate}}</label> <input type="email" name="email" id="user-email" ng-model="user_email" placeholder="{{ \'ENTER_EMAIL\' | translate }}" value=""> <a class="button green block step-2" ng-click="sentReset()">{{\'SEND\' | translate}}</a><p class="gray devide" ui-sref="new-user-info">{{\'NO_ACCOUNT\' | translate}}</p></div></form></div></div></div>'),e.put("app/confirm-appointment/confirm-appointment.html",'<div ng-include="\'app/common/topnavbar.html\'"></div><div class="nametag"><div class="small-container"><h2 class="underline green">{{\'CONFIRM_APPT_INFO\' | translate}}</h2><p class="">{{\'REVIEW\' | translate}}</p></div></div><div class="small-container text-center"><div class="info-table"><div class="thumb patient"></div><div><span>{{\'PATIENT\' | translate}} -</span> {{formData.first_name}} {{formData.last_name}}</div><div class="thumb physician"></div><div><span>{{\'PHYSICIAN\' | translate}} -</span> {{apptData.doctor.first_name}} {{apptData.doctor.last_name}}</div><div class="thumb location"></div><div><span>{{\'LOCATION\' | translate}} -</span> {{apptData.facility.address_line}} {{apptData.facility.postal_code}}</div><div class="thumb time"></div><div ng-if="!frenchDates"><span>{{\'TIME\' | translate}} -</span> {{apptData.date}} {{apptData.start_time | limitTo: 5}}</div><div ng-if="frenchDates"><span>{{\'TIME\' | translate}} -</span> {{apptData.date_fr}} {{apptData.start_time | limitTo: 5}}</div></div><a class="button green step-2 small" ng-click="confirm()">{{\'CONFIRM_APPT\' | translate}}</a></div>'),e.put("app/new-profile-info/edit-profile-info.html",'<div ng-include="\'app/common/topnavbar.html\'"></div><div class="nametag"><div class="small-container"><h2 class="underline green">Patient, {{newRelations.first_name}} {{newRelations.last_name}}</h2><p>{{\'SIGNUP_TEXT\' | translate}}</p></div></div><div class="small-container"><form ng-model="relationForm" name="relationForm" id="relationForm" novalidate=""><div class="form-group text-center"><div class="row"><div class="col-sm-6"><label for="exampleInputName2">{{\'FIRST_NAME\' | translate}}</label> <input ng-model="newRelations.first_name" type="text" name="first_name" placeholder="{{\'ENTER_FIRST_NAME\' | translate}}" required=""><div ng-show="relationForm.first_name.$dirty || relationForm.$submitted"><span ng-show="relationForm.form.first_name.$error.required" class="help-block">{{\'ERROR\' | translate}}<p></p></span></div></div><div class="col-sm-6"><label for="exampleInputName2">{{\'LAST_NAME\' | translate}}</label> <input ng-model="newRelations.last_name" type="text" name="last_name" placeholder="{{\'ENTER_LAST_NAME\' | translate}}" required=""><div ng-show="relationForm.last_name.$dirty || relationForm.$submitted"><span ng-show="relationForm.last_name.$error.required" class="help-block">{{\'ERROR\' | translate}}<p></p></span></div></div></div><div class="row"><div class="col-sm-12"><label for="exampleInputName2">{{\'NATURE_OF_RELATIONSHIP\' | translate}}</label><select ng-model="newRelations.relationship" name="relationship" required=""><option value="">{{\'RELATIONSHIP_TYPE\'| translate}}</option><option value="Parent">{{\'PARENT\'| translate}}</option><option value="Child">{{\'CHILD\'| translate}}</option><option value="Sibling">{{\'SIBLING\'| translate}}</option><option value="Spouse">{{\'SPOUSE\'| translate}}</option><option value="Other">{{\'OTHER\'| translate}}</option></select><div ng-show="relationForm.relationship.$dirty || relationForm.$submitted"><span ng-show="relationForm.relationship.$error.required" class="help-block">{{\'ERROR\' | translate}}<p></p></span></div></div></div><div class="row"><div class="col-sm-6"><label for="exampleInputName2">{{\'RAMQ_NUMBER\' | translate}}</label> <input ng-model="newRelations.RAMQ" maxlength="12" type="text" name="first_name" placeholder="{{\'ENTER_RAMQ_NUMBER\' | translate}}"></div><div class="col-sm-6"><label for="exampleInputName2">{{\'RAMQ_EXPIRY\' | translate}}</label><div class="row"><div class="col-sm-6"><select class="half" ng-model="newRelations.ramq_expiry_selected_month"><option value="0" selected="" disabled="">MM</option><option value="01">1</option><option value="02">2</option><option value="03">3</option><option value="04">4</option><option value="05">5</option><option value="06">6</option><option value="07">7</option><option value="08">8</option><option value="09">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option></select></div><div class="col-sm-6"><select class="half" ng-model="newRelations.ramq_expiry_selected_year"><option value="0" selected="" disabled="">{{\'YY\' | translate}}</option><option value="2016">16</option><option value="2017">17</option><option value="2018">18</option><option value="2019">19</option><option value="2020">20</option><option value="2021">21</option><option value="2022">22</option><option value="2023">23</option><option value="2024">24</option><option value="2025">25</option><option value="2026">26</option><option value="2027">27</option><option value="2028">28</option><option value="2029">29</option><option value="2030">30</option></select></div></div></div></div><div class="row"><div class="checkbox col-sm-12"><md-checkbox value="" ng-model="newRelations.noRAMQ">{{\'NO_RAMQ_PERSON\'| translate}}</md-checkbox></div></div><div class="row"><div class="col-sm-6"><label>Date of birth</label><select class="third" ng-model="birthMonth"><option value="" selected="" disabled="">MM</option><option value="01">{{\'JAN_SHORT\'| translate}}</option><option value="02">{{\'FEB_SHORT\'| translate}}</option><option value="03">{{\'MAR_SHORT\'| translate}}</option><option value="04">{{\'APR_SHORT\'| translate}}</option><option value="05">{{\'MAY_SHORT\'| translate}}</option><option value="06">{{\'JUN_SHORT\'| translate}}</option><option value="07">{{\'JUL_SHORT\'| translate}}</option><option value="08">{{\'AUG_SHORT\'| translate}}</option><option value="09">{{\'SEP_SHORT\'| translate}}</option><option value="10">{{\'OCT_SHORT\'| translate}}</option><option value="11">{{\'NOV_SHORT\'| translate}}</option><option value="12">{{\'DEC_SHORT\'| translate}}</option></select><select class="third" ng-model="birthDay"><option selected="" disabled="" value="">DD</option><option value="01">01</option><option value="02">02</option><option value="03">03</option><option value="04">04</option><option value="05">05</option><option value="06">06</option><option value="07">07</option><option value="08">08</option><option value="09">09</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option><option value="24">24</option><option value="25">25</option><option value="26">26</option><option value="27">27</option><option value="28">28</option><option value="29">29</option><option value="30">30</option><option value="31">31</option></select><select class="third" ng-model="birthYear"><option value="">{{\'YY\' | translate}}</option><option ng-repeat="year in availableYears" ng-value="year">{{year}}</option></select></div><div class="col-sm-6"><label>{{\'GENDER\' | translate}}</label><select ng-model="newRelations.gender" required="" name="gender"><option value="1">{{\'GENDER_MALE\' | translate}}</option><option value="2">{{\'GENDER_FEMALE\' | translate}}</option></select><div ng-show="relationForm.gender.$dirty || relationForm.$submitted"><span ng-show="relationForm.gender.$error.required" class="help-block">{{\'ERROR\' | translate}}<p></p></span></div></div></div><div class="row"><div class="col-sm-12"><label>{{\'PREFERRED_LANGUAGE\' | translate}}</label><select ng-model="newRelations.preferred_language"><option value="en">{{\'ENGLISH\' | translate}}</option><option value="fr">{{\'FRENCH\' | translate}}</option></select></div></div><div class="row"><div class="checkbox col-sm-12"><md-checkbox value="" ng-model="newRelations.sendNotifications">{{\'NOTIFICATIONS\'| translate}}</md-checkbox></div></div><div class="row"><div class="col-sm-6"><label>{{\'MOBILE_PHONE\' | translate}}</label> <input id="mobile_input" type="text" name="" placeholder="{{\'ENTER_MOBILE_PHONE\' | translate}}" ng-model="newRelations.mobile_phone" mask="(999)999-9999"></div><div class="col-sm-6"><label>{{\'EMAIL\' | translate}}</label> <input ng-model="newRelations.email" type="email" name="email" placeholder="{{\'ENTER_EMAIL\' | translate}}"></div></div><input type="submit" class="button green step-2 small pull-left" ng-click="addRelation()" value="{{\'SAVE_AND_CONTINUE\' | translate}}"> <a class="button danger small" ng-click="deleteRelation()">DELETE RELATION</a></div></form></div>'),e.put("app/new-profile-info/new-profile-info.html",'<div ng-include="\'app/common/topnavbar.html\'"></div><div class="nametag"><div class="small-container"><h2 class="underline green">{{\'SIGNUP_HEADER\' | translate}}</h2><p class="">{{\'SIGNUP_TEXT\' | translate}}</p></div></div><div class="small-container"><form ng-model="relationForm" name="relationForm" id="relationForm" novalidate=""><div class="form-group text-center"><div class="row"><div class="col-sm-6"><label for="exampleInputName2">{{\'FIRST_NAME\' | translate}}</label> <input ng-model="newRelations.first_name" type="text" name="first_name" placeholder="{{\'ENTER_FIRST_NAME\' | translate}}" required=""><div ng-show="relationForm.first_name.$dirty || relationForm.$submitted"><span ng-show="relationForm.form.first_name.$error.required" class="help-block">{{\'ERROR\' | translate}}<p></p></span></div></div><div class="col-sm-6"><label for="exampleInputName2">{{\'LAST_NAME\' | translate}}</label> <input ng-model="newRelations.last_name" type="text" name="last_name" placeholder="{{\'ENTER_LAST_NAME\' | translate}}" required=""><div ng-show="relationForm.last_name.$dirty || relationForm.$submitted"><span ng-show="relationForm.last_name.$error.required" class="help-block">{{\'ERROR\' | translate}}<p></p></span></div></div></div><div class="row"><div class="col-sm-12"><label for="exampleInputName2">{{\'NATURE_OF_RELATIONSHIP\' | translate}}</label><select ng-model="newRelations.relationship" name="relationship" required=""><option value="">{{\'RELATIONSHIP_TYPE\'| translate}}</option><option value="Parent">{{\'PARENT\'| translate}}</option><option value="Child">{{\'CHILD\'| translate}}</option><option value="Sibling">{{\'SIBLING\'| translate}}</option><option value="Spouse">{{\'SPOUSE\'| translate}}</option><option value="Other">{{\'OTHER\'| translate}}</option></select><div ng-show="relationForm.relationship.$dirty || relationForm.$submitted"><span ng-show="relationForm.relationship.$error.required" class="help-block">{{\'ERROR\' | translate}}<p></p></span></div></div></div><div class="row"><div class="col-sm-6"><label for="exampleInputName2">{{\'RAMQ_NUMBER\' | translate}}</label> <input ng-model="newRelations.RAMQ" maxlength="12" type="text" name="first_name" placeholder="{{\'ENTER_RAMQ_NUMBER\' | translate}}"></div><div class="col-sm-6"><label for="exampleInputName2">{{\'RAMQ_EXPIRY\' | translate}}</label><div class="row"><div class="col-sm-6"><select class="half" ng-model="newRelations.ramq_expiry_selected_month"><option value="0" selected="" disabled="">MM</option><option value="01">1</option><option value="02">2</option><option value="03">3</option><option value="04">4</option><option value="05">5</option><option value="06">6</option><option value="07">7</option><option value="08">8</option><option value="09">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option></select></div><div class="col-sm-6"><select class="half" ng-model="newRelations.ramq_expiry_selected_year"><option value="0" selected="" disabled="">{{\'YY\' | translate}}</option><option value="2016">16</option><option value="2017">17</option><option value="2018">18</option><option value="2019">19</option><option value="2020">20</option><option value="2021">21</option><option value="2022">22</option><option value="2023">23</option><option value="2024">24</option><option value="2025">25</option><option value="2026">26</option><option value="2027">27</option><option value="2028">28</option><option value="2029">29</option><option value="2030">30</option></select></div></div></div></div><div class="row"><div class="checkbox col-sm-12"><md-checkbox value="" ng-model="newRelations.noRAMQ">{{\'NO_RAMQ_PERSON\'| translate}}</md-checkbox></div></div><div class="row"><div class="col-sm-6"><label>{{\'DOB\'| translate}}</label><select class="third" ng-model="birthMonth"><option value="" selected="" disabled="">MM</option><option value="01">{{\'JAN_SHORT\'| translate}}</option><option value="02">{{\'FEB_SHORT\'| translate}}</option><option value="03">{{\'MAR_SHORT\'| translate}}</option><option value="04">{{\'APR_SHORT\'| translate}}</option><option value="05">{{\'MAY_SHORT\'| translate}}</option><option value="06">{{\'JUN_SHORT\'| translate}}</option><option value="07">{{\'JUL_SHORT\'| translate}}</option><option value="08">{{\'AUG_SHORT\'| translate}}</option><option value="09">{{\'SEP_SHORT\'| translate}}</option><option value="10">{{\'OCT_SHORT\'| translate}}</option><option value="11">{{\'NOV_SHORT\'| translate}}</option><option value="12">{{\'DEC_SHORT\'| translate}}</option></select><select class="third" ng-model="birthDay"><option selected="" disabled="" value="">DD</option><option value="01">01</option><option value="02">02</option><option value="03">03</option><option value="04">04</option><option value="05">05</option><option value="06">06</option><option value="07">07</option><option value="08">08</option><option value="09">09</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option><option value="24">24</option><option value="25">25</option><option value="26">26</option><option value="27">27</option><option value="28">28</option><option value="29">29</option><option value="30">30</option><option value="31">31</option></select><select class="third" ng-model="birthYear"><option value="">{{\'YY\' | translate}}</option><option ng-repeat="year in availableYears" ng-value="year">{{year}}</option></select></div><div class="col-sm-6"><label>{{\'GENDER\' | translate}}</label><select ng-model="newRelations.gender" required="" name="gender"><option value="1">{{\'GENDER_MALE\' | translate}}</option><option value="2">{{\'GENDER_FEMALE\' | translate}}</option></select><div ng-show="relationForm.gender.$dirty || relationForm.$submitted"><span ng-show="relationForm.gender.$error.required" class="help-block">{{\'ERROR\' | translate}}<p></p></span></div></div></div><div class="row"><div class="col-sm-12"><label>{{\'PREFERRED_LANGUAGE\' | translate}}</label><select ng-model="newRelations.preferred_language"><option value="en">{{\'ENGLISH\' | translate}}</option><option value="fr">{{\'FRENCH\' | translate}}</option></select></div></div><div class="row"><div class="checkbox col-sm-12"><md-checkbox value="" ng-model="newRelations.sendNotifications">{{\'NOTIFICATIONS\'| translate}}</md-checkbox></div></div><div class="row"><div class="col-sm-6"><label>{{\'MOBILE_PHONE\' | translate}}</label> <input id="mobile_input" type="text" name="" placeholder="{{\'ENTER_MOBILE_PHONE\' | translate}}" ng-model="newRelations.mobile_phone" mask="(999)999-9999"></div><div class="col-sm-6"><label>{{\'EMAIL\' | translate}}</label> <input ng-model="newRelations.email" type="email" name="email" placeholder="{{\'ENTER_EMAIL\' | translate}}"></div></div><a ng-show="showButton" class="button green step-2 small" ng-click="addRelation()">{{\'SAVE_AND_CONTINUE\' | translate}}</a></div></form></div>'),e.put("app/login/login.html",'<div ng-include="\'app/common/topnavbar.html\'"></div><div class="nametag"><div class="small-container"><h2 class="underline green">{{\'LOGIN_HEADER\' | translate}}</h2><p class="">{{\'LOGIN_TEXT\' | translate}}.</p></div></div><form class="m-t" role="form" name="loginForm" ng-model="loginForm" id="loginForm" novalidate=""><div class="small-container"><label>{{\'EMAIL\' | translate}}</label> <input type="email" name="email" id="email" ng-model="formData.email" translate="" translate-attr-placeholder="ENTER_EMAIL" value="" required=""><div ng-show="loginForm.email.$dirty"><span ng-show="loginForm.email.$error.required" class="help-block">This field is required.<p></p></span> <span ng-show="loginForm.email.$error.email" class="help-block">Enter a valid email.<p></p></span></div><label>{{\'PASSWORD\' | translate}}</label> <input type="password" name="password" ng-model="formData.password" translate="" translate-attr-placeholder="ENTER_PASSWORD" value="" ng-minlength="6" required=""><a class="small gray" ui-sref="forgot-password">{{\'FORGOT_YOUR_PASSWORD\' | translate}}</a> <input type="submit" class="button green block step-2" ng-click="logIn()" translate="" translate-attr-value="LOGIN_BUTTON"><p class="gray devide" ui-sref="new-user-info">{{\'NO_ACCOUNT\' | translate}}</p></div></form>'),e.put("app/new-user-info/edit-user-info.html",'<div ng-include="\'app/common/topnavbar.html\'"></div><div class="nametag"><div class="small-container"><h2 class="underline green">Patient, {{options.first_name}} {{options.last_name}}</h2><p class="">{{\'SIGNUP_TEXT\' | translate}}</p></div></div><div class="small-container"><form class="signupForm" name="signupForm" id="signupForm" novalidate=""><div class="form-group text-center"><div class="row"><div class="col-sm-6"><label for="exampleInputName2">{{\'FIRST_NAME\' | translate}}</label> <input ng-model="options.first_name" type="text" name="first_name" placeholder="{{\'ENTER_FIRST_NAME\' | translate}}" required=""><div ng-show="signupForm.first_name.$dirty || signupForm.$submitted"><span ng-show="signupForm.first_name.$error.required" class="help-block">{{\'ERROR\' | translate}}<p></p></span></div></div><div class="col-sm-6"><label for="exampleInputName2">{{\'LAST_NAME\' | translate}}</label> <input ng-model="options.last_name" type="text" name="last_name" placeholder="{{\'ENTER_LAST_NAME\' | translate}}" required=""><div ng-show="signupForm.last_name.$dirty || signupForm.$submitted"><span ng-show="signupForm.last_name.$error.required" class="help-block">{{\'ERROR\' | translate}}<p></p></span></div></div></div><div class="row"><div class="col-sm-6"><label for="exampleInputName2">{{\'RAMQ_NUMBER\' | translate}}</label> <input ng-model="options.RAMQ" type="text" maxlength="12" name="RAMQ" placeholder="{{\'ENTER_RAMQ_NUMBER\' | translate}}"></div><div class="col-sm-6"><label for="exampleInputName2">{{\'RAMQ_EXPIRY\' | translate}}</label><div class="row"><div class="col-sm-6"><select class="half" ng-model="options.ramq_expiry_selected_month"><option value="" selected="" disabled="">MM</option><option value="01">1</option><option value="02">2</option><option value="03">3</option><option value="04">4</option><option value="05">5</option><option value="06">6</option><option value="07">7</option><option value="08">8</option><option value="09">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option></select></div><div class="col-sm-6"><select class="half" ng-model="options.ramq_expiry_selected_year"><option value="" selected="" disabled="">{{\'YY\' | translate}}</option><option value="2016">2016</option><option value="2017">2017</option><option value="2018">2018</option><option value="2019">2019</option><option value="2020">2020</option><option value="2021">2021</option><option value="2022">2022</option><option value="2023">2023</option><option value="2024">2024</option><option value="2025">2025</option><option value="2026">2026</option><option value="2027">2027</option><option value="2028">2028</option><option value="2029">2029</option><option value="2030">2030</option></select></div></div></div></div><div class="row"><div class="checkbox col-sm-12"><md-checkbox value="" name="noRAMQ" ng-model="options.noRAMQ">{{\'NO_RAMQ\' | translate}}</md-checkbox></div></div><div class="row"><div class="col-sm-6"><label>{{\'DOB\' | translate}}</label><select class="third" ng-model="birthMonth"><option value="" selected="" disabled="">MM</option><option value="01">{{\'JAN_SHORT\'| translate}}</option><option value="02">{{\'FEB_SHORT\'| translate}}</option><option value="03">{{\'MAR_SHORT\'| translate}}</option><option value="04">{{\'APR_SHORT\'| translate}}</option><option value="05">{{\'MAY_SHORT\'| translate}}</option><option value="06">{{\'JUN_SHORT\'| translate}}</option><option value="07">{{\'JUL_SHORT\'| translate}}</option><option value="08">{{\'AUG_SHORT\'| translate}}</option><option value="09">{{\'SEP_SHORT\'| translate}}</option><option value="10">{{\'OCT_SHORT\'| translate}}</option><option value="11">{{\'NOV_SHORT\'| translate}}</option><option value="12">{{\'DEC_SHORT\'| translate}}</option></select><select class="third" ng-model="birthDay"><option selected="" disabled="" value="">DD</option><option value="01">01</option><option value="02">02</option><option value="03">03</option><option value="04">04</option><option value="05">05</option><option value="06">06</option><option value="07">07</option><option value="08">08</option><option value="09">09</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option><option value="24">24</option><option value="25">25</option><option value="26">26</option><option value="27">27</option><option value="28">28</option><option value="29">29</option><option value="30">30</option><option value="31">31</option></select><select class="third" ng-model="birthYear"><option value="">{{\'YY\' | translate}}</option><option ng-repeat="year in availableYears" ng-value="year">{{year}}</option></select></div><div class="col-sm-6"><label>{{\'GENDER\' | translate}}</label><select ng-model="options.gender" name="gender" required=""><option value="1">{{\'GENDER_MALE\' | translate}}</option><option value="2">{{\'GENDER_FEMALE\' | translate}}</option></select><div ng-show="signupForm.$submitted"><span ng-show="signupForm.gender.$error.required" class="help-block">{{\'ERROR\' | translate}}<p></p></span> <span ng-show="signupForm.gender.$error.date" class="help-block">Enter a valid date.<p></p></span></div></div></div><div class="row"><div class="col-sm-12"><p class="note">{{\'MOBILE_INFO_TEXT\' | translate}}</p></div></div><div class="row"><div class="col-sm-6"><label>{{\'MOBILE_PHONE\' | translate}}</label> <input type="text" placeholder="{{\'ENTER_MOBILE_PHONE\' | translate}}" id="mobile_input" ng-model="options.mobile_phone" name="mobile_phone" mask="(999)999-9999" required=""><div ng-show="signupForm.mobile_phone.$dirty || signupForm.$submitted"><span ng-show="signupForm.mobile_phone.$error.required" class="help-block">{{\'ERROR\' | translate}}<p></p></span> <span ng-show="signupForm.mobile_phone.$error.date" class="help-block">Enter a valid date.<p></p></span></div></div><div class="col-sm-6"><label>{{\'EMAIL\' | translate}}</label> <input ng-model="options.email" type="email" name="email" placeholder="{{\'ENTER_EMAIL\' | translate}}" required=""><div ng-show="signupForm.email.$dirty || signupForm.$submitted"><span ng-show="signupForm.email.$error.required" class="help-block">{{\'ERROR\' | translate}}<p></p></span> <span ng-show="signupForm.email.$error.date" class="help-block">Enter a valid date.<p></p></span></div></div></div><input type="submit" class="button green block step-2" ng-click="updateProfile()" value="{{\'SAVE_AND_CONTINUE\' | translate}}"></div></form></div>'),e.put("app/new-user-info/new-user-info.html",'<div ng-include="\'app/common/topnavbar.html\'"></div><div class="nametag"><div class="small-container"><h2 class="underline green">{{\'SIGNUP_HEADER\' | translate}}</h2><p class="">{{\'SIGNUP_TEXT\' | translate}}</p></div></div><div class="small-container"><form class="signupForm" name="signupForm" id="signupForm" novalidate=""><div class="form-group text-center"><div class="row"><div class="col-sm-6"><label for="exampleInputName2">{{\'FIRST_NAME\' | translate}}</label> <input ng-model="first_name" type="text" name="first_name" placeholder="{{ \'ENTER_FIRST_NAME\' | translate }}" required=""><div ng-show="signupForm.first_name.$dirty || signupForm.$submitted"><span ng-show="signupForm.first_name.$error.required" class="help-block">{{\'ERROR\' | translate}}<p></p></span></div></div><div class="col-sm-6"><label for="exampleInputName2">{{\'LAST_NAME\' | translate}}</label> <input ng-model="last_name" type="text" name="last_name" placeholder="{{ \'ENTER_LAST_NAME\' | translate }}" required=""><div ng-show="signupForm.last_name.$dirty || signupForm.$submitted"><span ng-show="signupForm.last_name.$error.required" class="help-block">{{\'ERROR\' | translate}}<p></p></span></div></div></div><div class="row"><div class="col-sm-6"><label for="exampleInputName2">{{\'RAMQ_NUMBER\' | translate}}</label> <input ng-model="RAMQ" maxlength="12" type="text" name="RAMQ" placeholder="{{ \'RAMQ_NUMBER\' | translate }}"></div><div class="col-sm-6"><label for="exampleInputName2">{{\'RAMQ_EXPIRY\' | translate}}</label><div class="row"><div class="col-sm-6"><select class="half" ng-model="ramq_expiry_selected_month"><option value="" selected="" disabled="">MM</option><option value="01">1</option><option value="02">2</option><option value="03">3</option><option value="04">4</option><option value="05">5</option><option value="06">6</option><option value="07">7</option><option value="08">8</option><option value="09">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option></select></div><div class="col-sm-6"><select class="half" ng-model="ramq_expiry_selected_year"><option value="" selected="" disabled="">{{\'YY\' | translate}}</option><option value="2016">16</option><option value="2017">17</option><option value="2018">18</option><option value="2019">19</option><option value="2020">20</option><option value="2021">21</option><option value="2022">22</option><option value="2023">23</option><option value="2024">24</option><option value="2025">25</option><option value="2026">26</option><option value="2027">27</option><option value="2028">28</option><option value="2029">29</option><option value="2030">30</option></select></div></div></div></div><div class="row"><div class="checkbox col-sm-12"><md-checkbox value="" name="noRAMQ" ng-model="noRAMQ">{{\'NO_RAMQ\' | translate}}</md-checkbox></div></div><div class="row"><div class="col-sm-6"><label>{{\'DOB\' | translate}}</label><select class="third" ng-model="birthMonth" required=""><option value="" selected="" disabled="">MM</option><option value="01">{{\'JAN_SHORT\'| translate}}</option><option value="02">{{\'FEB_SHORT\'| translate}}</option><option value="03">{{\'MAR_SHORT\'| translate}}</option><option value="04">{{\'APR_SHORT\'| translate}}</option><option value="05">{{\'MAY_SHORT\'| translate}}</option><option value="06">{{\'JUN_SHORT\'| translate}}</option><option value="07">{{\'JUL_SHORT\'| translate}}</option><option value="08">{{\'AUG_SHORT\'| translate}}</option><option value="09">{{\'SEP_SHORT\'| translate}}</option><option value="10">{{\'OCT_SHORT\'| translate}}</option><option value="11">{{\'NOV_SHORT\'| translate}}</option><option value="12">{{\'DEC_SHORT\'| translate}}</option></select><select class="third" ng-model="birthDay" required=""><option selected="" disabled="" value="">DD</option><option value="01">01</option><option value="02">02</option><option value="03">03</option><option value="04">04</option><option value="05">05</option><option value="06">06</option><option value="07">07</option><option value="08">08</option><option value="09">09</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option><option value="24">24</option><option value="25">25</option><option value="26">26</option><option value="27">27</option><option value="28">28</option><option value="29">29</option><option value="30">30</option><option value="31">31</option></select><select class="third" ng-model="birthYear" name="birthYear" required=""><option value="">{{\'YY\' | translate}}</option><option ng-repeat="year in availableYears" ng-value="year">{{year}}</option></select><div ng-show="signupForm.birth_year.$dirty || signupForm.$submitted"><span ng-show="signupForm.birthYear.$error.required" class="help-block">{{\'ERROR\' | translate}}<p></p></span> <span ng-show="signupForm.date_of_birth.$error.date" class="help-block">Enter a valid date.<p></p></span></div></div><div class="col-sm-6"><label>{{\'GENDER\' | translate}}</label><select ng-model="gender" name="gender" required=""><option value="1">{{\'GENDER_MALE\' | translate}}</option><option value="2">{{\'GENDER_FEMALE\' | translate}}</option></select><div ng-show="signupForm.$submitted"><span ng-show="signupForm.gender.$error.required" class="help-block">{{\'ERROR\' | translate}}<p></p></span> <span ng-show="signupForm.gender.$error.date" class="help-block">Enter a valid date.<p></p></span></div></div></div><div class="row"><div class="col-sm-12"><p class="note">{{\'MOBILE_INFO_TEXT\' | translate}}</p></div></div><div class="row"><div class="col-sm-6"><label>{{\'MOBILE_PHONE\' | translate}}</label> <input type="text" placeholder="{{ \'ENTER_MOBILE_PHONE\' | translate }}" id="mobile_input" ng-model="mobile" name="mobile_phone" mask="(999)999-9999" required=""><div ng-show="signupForm.mobile_phone.$dirty || signupForm.$submitted"><span ng-show="signupForm.mobile_phone.$error.required" class="help-block">{{\'ERROR\' | translate}}<p></p></span> <span ng-show="signupForm.mobile_phone.$error.date" class="help-block">Enter a valid date.<p></p></span></div></div><div class="col-sm-6"><label>{{\'EMAIL\' | translate}}</label> <input ng-model="email" type="email" name="email" placeholder="{{\'ENTER_EMAIL\' | translate}}" required=""><div ng-show="signupForm.email.$dirty || signupForm.$submitted"><span ng-show="signupForm.email.$error.required" class="help-block">{{\'ERROR\' | translate}}<p></p></span> <span ng-show="signupForm.email.$error.date" class="help-block">Enter a valid date.<p></p></span></div></div></div><div class="row"><div class="col-sm-6"><label>{{\'PASSWORD\' | translate}}</label> <input type="password" ng-model="password" name="password" ng-minlength="6" placeholder="{{\'ENTER_PASSWORD\' | translate}}" required=""><div ng-show="signupForm.password.$dirty || signupForm.$submitted"><span ng-show="signupForm.password.$error.required" class="help-block">{{\'ERROR\' | translate}}<p></p></span> <span ng-show="signupForm.password.$error.minlength" class="help-block">{{\'SIX_CHAR_LONG\' | translate}}<p></p></span></div></div><div class="col-sm-6"><label>{{\'CONFIRM_PASSWORD\' | translate}}</label> <input ng-model="confirm_password" type="password" name="confirm_password" placeholder="{{\'ENTER_PASSWORD\' | translate}}" ng-minlength="6" required=""><div ng-show="signupForm.confirm_password.$dirty || signupForm.$submitted"><span ng-show="signupForm.confirm_password.$error.required" class="help-block">{{\'ERROR\' | translate}}<p></p></span> <span ng-show="signupForm.confirm_password.$error.minlength" class="help-block">{{\'SIX_CHAR_LONG\' | translate}}<p></p></span></div></div></div><div class="row"><div class="checkbox col-sm-12"><md-checkbox value="" required="" name="terms" ng-model="terms"><em>{{\'AGREE_TERMS\' | translate}} <a href="/#/terms">{{\'AGREE_TERMS_REST\' | translate}}</a></em></md-checkbox><div ng-show="signupForm.terms.$dirty || signupForm.$submitted"></div></div></div><input type="submit" class="button green block step-2" ng-click="signUp()" translate="" translate-attr-value="SAVE_AND_CONTINUE"></div></form></div>'),e.put("app/pin-confirmation/pin-confirmation.html",'<div ng-include="\'app/common/topnavbar.html\'"></div><div class="nametag"><div class="small-container"><h2 class="underline green">{{\'PIN_CONFIRMATION\' | translate}}</h2><p ng-show="!showPopup">{{\'REVIEW_INFORMATION\' | translate}}</p><p ng-show="showPopup">Update phone number</p></div></div><form class="m-t" role="form" name="loginForm" data-ng-submit="login(user)"><div class="small-container text-center" ng-show="!showPopup"><div class="card phone red">{{\'SMS_SENT\' | translate}} {{user_phone}}. {{\'SMS_SENT_REST\' | translate}} <span class="card-bg"></span></div><input type="number" class="small text-center" placeholder="{{\'PIN_PLACEHOLDER\' | translate}}" name="pin-code" value="{{user_pin}}"> <a class="button green step-2 small" ng-click="sendConfirmation()">{{\'VERIFY\' | translate}}</a></div><div class="phone-popup"><div class="small-container text-center" ng-show="showPopup"><label>Please enter you mobile phone</label> <input id="mobile_input" type="text" name="" placeholder="{{\'ENTER_MOBILE_PHONE\' | translate}}" ng-model="mobile_phone" mask="(999)999-9999"> <a class="button green step-2 small" ng-click="updateMobile()" href="javascript:void(0)">{{\'SAVE_AND_CONTINUE\' | translate}}</a></div></div></form>'),e.put("app/welcome/welcome.html",'<div ng-include="\'app/common/topnavbar.html\'"></div><div class="nametag"><div class="small-container"><h2 class="underline green">{{\'WELCOME_BACK\' | translate}} {{userInfo.first_name}} {{userInfo.last_name}}</h2><p class="">{{\'SELECT_A_PATIENT\' | translate}}</p></div></div><form class="m-t" role="form" name="loginForm" data-ng-submit="login(user)"><div class="small-container text-center"><select ng-model="formData.id" ng-change="selectOther(formData.id)"><option selected="" disabled="">{{\'WHO_FOR\' | translate}}</option><option value="{{userInfo.id}}">{{userInfo.first_name}} {{userInfo.last_name}}</option><option ng-repeat="relative in relatives" value="{{relative.id}}">{{relative.first_name}} {{relative.last_name}} - {{relative.relationship}}</option></select><textarea rows="4" placeholder="{{\'DESCRIBE_REASON\' | translate}}" ng-model="formData.text"></textarea> <a class="button green step-2 small" ng-click="selectUser()">{{\'BOOK\' | translate}}</a></div></form>')
}]);